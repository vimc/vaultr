[{"path":"https://vaccineimpact.org/vaultr/articles/packages.html","id":"handling-lack-of-vault-gracefully","dir":"Articles","previous_headings":"","what":"Handling lack of vault gracefully","title":"Using vaultr in packages","text":"vaultr::vault_test_server function takes argument if_disabled callback function called failure start vault server. reasons : user opted setting VAULTR_TEST_SERVER_BIN_PATH binary place port opened default calls testthat::skip, interactively appear cause error called within test_that block test gracefully skip test Alternatively, provide handler: case, vaultr::vault_test_server return NULL might wrap vault-requiring tests : together (assuming testthat), use vault within tests might look like example vaultr tests: use one vault per test, , ’s need clean - can assume vault empty start test block worry cleanup end. vault enabled test skipped gracefully.","code":"srv <- vaultr::vault_test_server() ## Error: vault is not enabled srv <- vaultr::vault_test_server(if_disabled = message) if (!is.null(srv)) {   # ... vault requiring code here ... } test_that(\"list\", {   srv <- vault_test_server()   cl <- srv$client()    cl$write(\"secret/a\", list(key = 1))   cl$write(\"secret/b/c\", list(key = 2))   cl$write(\"secret/b/d/e\", list(key = 2))    expect_setequal(cl$list(\"secret\"), c(\"a\", \"b/\"))   expect_setequal(cl$list(\"secret\", TRUE), c(\"secret/a\", \"secret/b/\"))   expect_setequal(cl$list(\"secret/b\"), c(\"c\", \"d/\"))   expect_setequal(cl$list(\"secret/b\", TRUE), c(\"secret/b/c\", \"secret/b/d/\")) })"},{"path":"https://vaccineimpact.org/vaultr/articles/packages.html","id":"installing-vault","dir":"Articles","previous_headings":"","what":"Installing vault","title":"Using vaultr in packages","text":"develop package, need vault installed; please see official vault docs . use github actions, can follow approach vaultr ; add environment variables VAULTR_TEST_SERVER_BIN_PATH VAULTR_TEST_SERVER_PORT: use eLco/setup-vault action install suitable vault binary: See vaultr actions full details.","code":"env:       ...       VAULTR_TEST_SERVER_BIN_PATH: auto       VAULTR_TEST_SERVER_PORT: 18200 - uses: eLco/setup-vault@v1"},{"path":"https://vaccineimpact.org/vaultr/articles/vaultr.html","id":"connecting-to-vault","dir":"Articles","previous_headings":"","what":"Connecting to vault","title":"vaultr","text":"first part vignette assumes vault set ; later show control login behaviour configure vault . Access vault requires several environment variables configured, particular: VAULT_ADDR: address vault VAULT_TOKEN: token authenticate vault VAULTR_AUTH_METHOD: method use authenticate (login ) vault. (environment variables starting VAULT_ shared vault cli, variables starting VAULTR_ specific package). vignette, already configured: access vault, first create client: creates R6 object methods interacting vault: many methods, organised hierarchically, similar vault cli client. example vault$auth contains commands interacting authentication backends (contains command groups):","code":"Sys.getenv(c(\"VAULT_ADDR\", \"VAULT_TOKEN\", \"VAULTR_AUTH_METHOD\")) ##                             VAULT_ADDR                            VAULT_TOKEN  ##               \"http://127.0.0.1:18200\" \"069bb89d-b17a-d48c-5937-ea370aa72e70\"  ##                     VAULTR_AUTH_METHOD  ##                                \"token\" vault <- vaultr::vault_client(login = TRUE, quiet = TRUE) vault ## <vault: client> ##   Command groups: ##     audit: Interact with vault's audit devices ##     auth: administer vault's authentication methods ##     operator: Administration commands for vault operators ##     policy: Interact with policies ##     secrets: Interact with secret engines ##     token: Interact and configure vault's token support ##     tools: General tools provided by vault ##   Commands: ##     api() ##     delete(path) ##     help() ##     list(path, full_names = FALSE) ##     login(..., method = \"token\", mount = NULL, renew = FALSE, ##         quiet = FALSE, token_only = FALSE, use_cache = TRUE) ##     read(path, field = NULL, metadata = FALSE) ##     status() ##     unwrap(token) ##     wrap_lookup(token) ##     write(path, data) vault$auth ## <vault: auth> ##   Command groups: ##     approle: Interact and configure vault's AppRole support ##     github: Interact and configure vault's github support ##     ldap: Interact and configure vault's LDAP support ##     token: Interact and configure vault's token support ##     userpass: Interact and configure vault's userpass support ##   Commands: ##     backends() ##     disable(path) ##     enable(type, description = NULL, local = FALSE, path = NULL) ##     help() ##     list(detailed = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/articles/vaultr.html","id":"reading-writing-listing-and-deleting-secrets","dir":"Articles","previous_headings":"","what":"Reading, writing, listing and deleting secrets","title":"vaultr","text":"anticipated vast majority vaultr usage interacting vault’s key-value stores - done $read, $write, $list $delete methods base vault client object. default, vault server version-1 key value store mounted /secret. List secrets $list: values terminate / “directories”. Read secrets $read: secrets returned list, multiple secrets may stored path. access single field, use field argument: Delete secrets $delete: data longer available: Write new secrets $write: (aware may well write secret R history file .Rhistory - secure may want read environment variables use Sys.getenv() read R).","code":"vault$list(\"secret\") ## [1] \"database/\" vault$list(\"secret/database\") ## [1] \"admin\"    \"readonly\" vault$read(\"secret/database/readonly\") ## $value ## [1] \"passw0rd\" vault$read(\"secret/database/readonly\", field = \"value\") ## [1] \"passw0rd\" vault$delete(\"secret/database/readonly\") vault$read(\"secret/database/readonly\") ## NULL vault$write(\"secret/webserver\", list(password = \"horsestaple\"))"},{"path":"https://vaccineimpact.org/vaultr/articles/vaultr.html","id":"alternative-login-approaches","dir":"Articles","previous_headings":"","what":"Alternative login approaches","title":"vaultr","text":"Using token approach authentication requires already authenticated vault get token. usually convenient instead use method. Vault supports many authentication methods vaultr currently supports GitHub username/password point. document used reference point configuring vault situation testing. Please refer vault documentation first. want configure vault R rather command line client, find close mapping argument names. assume methods already configured vault administrator show interact .","code":""},{"path":"https://vaccineimpact.org/vaultr/articles/vaultr.html","id":"username-and-password-userpass","dir":"Articles","previous_headings":"Alternative login approaches","what":"Username and password (userpass)","title":"vaultr","text":"Assume vault configured support userpass authentication user alice exists password p4ssw0rd. obviously insecure! vaultr can use getPass securely prompt password:","code":"cl <- vaultr::vault_client(login = \"userpass\", username = \"alice\",                            password = \"p4ssw0rd\") ## ok, duration: 2764800 s (~32d) cl$read(\"secret/webserver\") ## $password ## [1] \"horsestaple\" cl <- vaultr::vault_client(login = \"userpass\", username = \"alice\") ## Password for 'alice': ******** ## ok, duration: 2764800 s (~32d)"},{"path":"https://vaccineimpact.org/vaultr/articles/vaultr.html","id":"github-github","dir":"Articles","previous_headings":"Alternative login approaches","what":"GitHub (github)","title":"vaultr","text":"Assuming vault configured support GitHub, environment variable VAULT_AUTH_GITHUB_TOKEN contains personal access token team configured vault access, can log github: See ?vault_client_auth_github details.","code":"cl <- vaultr::vault_client(login = \"github\")"},{"path":"https://vaccineimpact.org/vaultr/articles/vaultr.html","id":"ldap-ldap","dir":"Articles","previous_headings":"Alternative login approaches","what":"LDAP (ldap)","title":"vaultr","text":"organisation uses LDAP configured vault enable server level, can login using passing login = “ldap” along username: authenticate LDAP server, generate appropriate token. See ?vault_client_auth_ldap details.","code":"cl <- vaultr::vault_client(login = \"ldap\", username = \"alice\") ## Password for 'alice': ******** ## ok, duration: 2764800 s (~32d)"},{"path":"https://vaccineimpact.org/vaultr/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Rich FitzJohn. Author, maintainer. Robert Ashton. Author. Wes Hinsley. Author. Imperial College Science, Technology Medicine. Copyright holder.","code":""},{"path":"https://vaccineimpact.org/vaultr/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"FitzJohn R, Ashton R, Hinsley W (2023). vaultr: Vault Client Secrets Sensitive Data. R package version 1.1.6, https://www.vaccineimpact.org/vaultr/, https://github.com/vimc/vaultr.","code":"@Manual{,   title = {vaultr: Vault Client for Secrets and Sensitive Data},   author = {Rich FitzJohn and Robert Ashton and Wes Hinsley},   year = {2023},   note = {R package version 1.1.6, https://www.vaccineimpact.org/vaultr/},   url = {https://github.com/vimc/vaultr}, }"},{"path":"https://vaccineimpact.org/vaultr/development.html","id":null,"dir":"","previous_headings":"","what":"Development notes","title":"Development notes","text":"file contains (hopefully) useful information developing vaultr.","code":""},{"path":"https://vaccineimpact.org/vaultr/development.html","id":"running-all-the-tests","dir":"","previous_headings":"","what":"Running all the tests","title":"Development notes","text":"Set three environment variables loading package: set, package loaded pkgload::load_all() now able run bring test server.","code":"VAULTR_TEST_SERVER_PORT=18200 VAULTR_TEST_SERVER_BIN_PATH=/usr/bin  (or \"C:/Program Files/Vault/\") NOT_CRAN=true srv <- vault_test_server()"},{"path":"https://vaccineimpact.org/vaultr/development.html","id":"configuring-ldap","dir":"","previous_headings":"","what":"Configuring LDAP","title":"Development notes","text":"quite fiddly worth checking works vault dev server getting involved R client. Start server try instructions follow. two easy--use development servers: online test server using couple groups mathematicians scientists. (instructions worked using forum post) docker image rroemhild/test-openldap another terminal, start LDAP server : similar set commands (instructions worked using github issue) test suite use public forumsys version default, set environment variable VAULTR_TEST_LDAP_USE_DOCKER true use instead.","code":"vault server -dev -dev-root-token-id=MlF2MrMpmwfCZOkCHoZSDCJT export VAULT_ADDR=http://127.0.0.1:8200 vault login -method=token token=MlF2MrMpmwfCZOkCHoZSDCJT  vault secrets disable /secret vault secrets enable -version=1 -path=/secret kv vault write /secret/password value=mypass vault read /secret/password  echo 'path \"secret/*\" { capabilities = [\"read\"] }' | vault policy write read-secret -  vault auth disable ldap vault auth enable ldap  vault write auth/ldap/config \\   url=\"ldap://ldap.forumsys.com\" \\   binddn='cn=read-only-admin,dc=example,dc=com' \\   bindpass='password' \\   userdn='dc=example,dc=com' \\   userattr='uid' \\   groupfilter='(uniqueMember={{.UserDN}})' \\   groupdn='dc=example,dc=com' \\   groupattr='ou'  vault write auth/ldap/groups/scientists policies=read-secret  vault login -method=ldap username=einstein password=password vault read /secret/password docker run --rm -p 127.0.0.1:10389:10389 rroemhild/test-openldap export VAULT_ADDR=http://127.0.0.1:8200 vault login -method=token token=MlF2MrMpmwfCZOkCHoZSDCJT  vault secrets disable /secret vault secrets enable -version=1 -path=/secret kv vault write /secret/password value=mypass vault read /secret/password  echo 'path \"secret/*\" { capabilities = [\"read\"] }' | vault policy write read-secret -  vault auth disable ldap vault auth enable ldap  vault write auth/ldap/config \\   url=\"ldap://localhost:10389\" \\   userdn=\"ou=people,dc=planetexpress,dc=com\" \\   groupdn=\"ou=people,dc=planetexpress,dc=com\" \\   groupattr=\"cn\" \\   userattr=uid \\   binddn=\"cn=admin,dc=planetexpress,dc=com\" \\   bindpass='GoodNewsEveryone'  vault write auth/ldap/groups/admin_staff policies=read-secret  vault login -method=ldap username=hermes password=hermes vault read /secret/password VAULTR_TEST_LDAP_USE_DOCKER=true"},{"path":"https://vaccineimpact.org/vaultr/index.html","id":"vaultr","dir":"","previous_headings":"","what":"Vault Client for Secrets and Sensitive Data","title":"Vault Client for Secrets and Sensitive Data","text":"Interact HashiCorp’s vault, securely use secrets R. package wraps vault http API allow secrets accessed R. Secrets might passwords, tokens, certificates sensitive data. Authenticate several different providers (token, username password, GitHub, LDAP, “approle”) Read write secrets vault using key-value stores (version 1 2), cubbyhole -transit “encryption---service” Inspect work vault tokens Read, write update vault policies Allows degree access operator maintenance Work vault’s audit devices","code":""},{"path":"https://vaccineimpact.org/vaultr/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Vault Client for Secrets and Sensitive Data","text":"Create vault client vault_client function: Interact vault using object: read secrets set secrets delete secrets ","code":"vault <- vaultr::vault_client(login = TRUE) ## Verifying token vault$list(\"secret/database\") ## [1] \"admin\"    \"readonly\" vault$read(\"secret/database/admin\") ## $value ## [1] \"s3cret\" vault$read(\"secret/database/readonly\", field = \"value\") ## [1] \"passw0rd\" vault$write(\"secret/webserver\", list(password = \"horsestaple\")) vault$read(\"secret/webserver\") vault$delete(\"/secret/database/readonly\")"},{"path":"https://vaccineimpact.org/vaultr/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Vault Client for Secrets and Sensitive Data","text":"Install vaultr CRAN install internally released version (might ahead CRAN) via r-universe, use install bleeding edge ","code":"install.packages(\"vaultr\") install.packages(   \"vaultr\",   repos = c(\"https://vimc.r-universe.dev\", \"https://cloud.r-project.org\")) remotes::install_gitub(\"vimc/vaultr\", upgrade = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Vault Client for Secrets and Sensitive Data","text":"MIT © Imperial College Science, Technology Medicine","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":null,"dir":"Reference","previous_headings":"","what":"Vault Low-Level Client — vault_api_client","title":"Vault Low-Level Client — vault_api_client","text":"Vault Low-Level Client Vault Low-Level Client","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Vault Low-Level Client — vault_api_client","text":"Low-level API client.  can used directly communicate vault server.  object primarily useful debugging, testing developing new vault methods, nonetheless described .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Vault Low-Level Client — vault_api_client","text":"vaultr::vault_client_object -> vault_api_client","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"Vault Low-Level Client — vault_api_client","text":"addr vault address (protocol, hostname port) base_url base url (protocol, hostname, port api version path) tls_config Information used TLS config, used namespace vault namespace, used token vault token, authenticated version vault server version, queried","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Vault Low-Level Client — vault_api_client","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Vault Low-Level Client — vault_api_client","text":"vault_api_client$new() vault_api_client$request() vault_api_client$is_authenticated() vault_api_client$set_token() vault_api_client$verify_token() vault_api_client$server_version() vault_api_client$GET() vault_api_client$LIST() vault_api_client$POST() vault_api_client$PUT() vault_api_client$DELETE()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Vault Low-Level Client — vault_api_client","text":"Create new api client","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Low-Level Client — vault_api_client","text":"","code":"vault_api_client$new(addr = NULL, tls_config = NULL, namespace = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Low-Level Client — vault_api_client","text":"addr Address vault server tls_config Optional TLS config namespace Optional namespace","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"method-request-","dir":"Reference","previous_headings":"","what":"Method request()","title":"Vault Low-Level Client — vault_api_client","text":"Make request api. Typically use one higher-level wrappers, $GET $POST.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Low-Level Client — vault_api_client","text":"","code":"vault_api_client$request(verb, path, ..., token = self$token)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Low-Level Client — vault_api_client","text":"verb HTTP verb use, httr function (e.g., pass httr::GET GET request). path request path ... Additional arguments passed httr function token Optional token, overriding client token","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"method-is-authenticated-","dir":"Reference","previous_headings":"","what":"Method is_authenticated()","title":"Vault Low-Level Client — vault_api_client","text":"Test vault client currently holds vault token. method verify token - test present.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Low-Level Client — vault_api_client","text":"","code":"vault_api_client$is_authenticated()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"method-set-token-","dir":"Reference","previous_headings":"","what":"Method set_token()","title":"Vault Low-Level Client — vault_api_client","text":"Set token within client","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Low-Level Client — vault_api_client","text":"","code":"vault_api_client$set_token(token, verify = FALSE, quiet = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Low-Level Client — vault_api_client","text":"token String, new vault client token verify Logical, indicating test token valid. TRUE, use $verify_token() test token setting valid error thrown token set. quiet Logical, TRUE, informational messages suppressed.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"method-verify-token-","dir":"Reference","previous_headings":"","what":"Method verify_token()","title":"Vault Low-Level Client — vault_api_client","text":"Test token valid vault. call vault's /sys/capabilities-self endpoint token provided check /sys path.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Low-Level Client — vault_api_client","text":"","code":"vault_api_client$verify_token(token, quiet = TRUE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Low-Level Client — vault_api_client","text":"token String, vault client token test quiet Logical, TRUE, informational messages suppressed","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"method-server-version-","dir":"Reference","previous_headings":"","what":"Method server_version()","title":"Vault Low-Level Client — vault_api_client","text":"Retrieve vault server version.  default cached within client session.  return R numeric_version object.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Low-Level Client — vault_api_client","text":"","code":"vault_api_client$server_version(refresh = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Low-Level Client — vault_api_client","text":"refresh Logical, indicating server version information refreshed even known.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"method-get-","dir":"Reference","previous_headings":"","what":"Method GET()","title":"Vault Low-Level Client — vault_api_client","text":"Send GET request vault server","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Low-Level Client — vault_api_client","text":"","code":"vault_api_client$GET(path, ...)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Low-Level Client — vault_api_client","text":"path server path use.  \"interesting\" part path , server base url api version information added. ... Additional httr-compatible options.  named parameters httr \"request\" objects.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"method-list-","dir":"Reference","previous_headings":"","what":"Method LIST()","title":"Vault Low-Level Client — vault_api_client","text":"Send LIST request vault server","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Low-Level Client — vault_api_client","text":"","code":"vault_api_client$LIST(path, ...)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Low-Level Client — vault_api_client","text":"path server path use.  \"interesting\" part path , server base url api version information added. ... Additional httr-compatible options.  named parameters httr \"request\" objects.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"method-post-","dir":"Reference","previous_headings":"","what":"Method POST()","title":"Vault Low-Level Client — vault_api_client","text":"Send POST request vault server","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Low-Level Client — vault_api_client","text":"","code":"vault_api_client$POST(path, ...)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Low-Level Client — vault_api_client","text":"path server path use.  \"interesting\" part path , server base url api version information added. ... Additional httr-compatible options.  named parameters httr \"request\" objects.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"method-put-","dir":"Reference","previous_headings":"","what":"Method PUT()","title":"Vault Low-Level Client — vault_api_client","text":"Send PUT request vault server","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"usage-9","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Low-Level Client — vault_api_client","text":"","code":"vault_api_client$PUT(path, ...)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"arguments-8","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Low-Level Client — vault_api_client","text":"path server path use.  \"interesting\" part path , server base url api version information added. ... Additional httr-compatible options.  named parameters httr \"request\" objects.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"method-delete-","dir":"Reference","previous_headings":"","what":"Method DELETE()","title":"Vault Low-Level Client — vault_api_client","text":"Send DELETE request vault server","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"usage-10","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Low-Level Client — vault_api_client","text":"","code":"vault_api_client$DELETE(path, ...)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"arguments-9","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Low-Level Client — vault_api_client","text":"path server path use.  \"interesting\" part path , server base url api version information added. ... Additional httr-compatible options.  named parameters httr \"request\" objects.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_api_client.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Vault Low-Level Client — vault_api_client","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   # Ordinarily, we would use the \"vault_client\" object for   # high-level access to the vault server   client <- server$client()   client$status()    # The api() method returns the \"api client\" object:   api <- client$api()   api    # This allows running arbitrary HTTP requests against the server:   api$GET(\"/sys/seal-status\")    # this is how vaultr is internally implemented so anything can   # be done here, for example following vault's API documentation   # https://www.vaultproject.io/api/secret/kv/kv-v1.html#sample-request-2   api$POST(\"/secret/mysecret\", body = list(key = \"value\"))   api$GET(\"/secret/mysecret\")   api$DELETE(\"/secret/mysecret\")    # cleanup   server$kill() }"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":null,"dir":"Reference","previous_headings":"","what":"Make a vault client — vault_client","title":"Make a vault client — vault_client","text":"Make vault client.  must done accessing vault.  default values arguments controlled environment variables (see Details) values provided arguments override defaults.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a vault client — vault_client","text":"","code":"vault_client(   login = FALSE,   ...,   addr = NULL,   tls_config = NULL,   namespace = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make a vault client — vault_client","text":"login Login method.  Specify string passed along method argument $login.  default FALSE means login.  TRUE means login using default method specified environment variable VAULTR_AUTH_METHOD - variable set, error thrown.  value NULL TRUE throw error VAULTR_AUTH_METHOD set.  Supported methods token, github, approle, ldap, userpass. ... Additional arguments passed along authentication method indicated login, used. addr vault address including protocol port, e.g., https://vault.example.com:8200.  given, default environment variable VAULT_ADDR, used vault's command line client. tls_config TLS (https) configuration.  uses can left blank.  However, vault server uses self-signed certificate need provide .  Defaults environment variable VAULT_CAPATH, vault's command line client. namespace vault namespace, using enterprise vault. given, must string, vault must support namespaces, enterprise feature. environment variable VAULT_NAMESPACE set, use namespace NULL provided argument (variable used vault's command line client).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"environment-variables","dir":"Reference","previous_headings":"","what":"Environment variables","title":"Make a vault client — vault_client","text":"creation client affected number environment variables, following main vault command line client. VAULT_ADDR: url vault server.  Must include protocol (likely https:// testing http:// might used) VAULT_CAPATH: path CA certificates VAULT_TOKEN: vault token use authentication. used token-based authentication VAULT_AUTH_GITHUB_TOKEN: command line client, github token authentication using github authentication backend VAULTR_AUTH_METHOD: method use authentication","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Make a vault client — vault_client","text":"Rich FitzJohn","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Make a vault client — vault_client","text":"vaultr::vault_client_object -> vault_client","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"Make a vault client — vault_client","text":"auth Authentication backends: vault_client_auth audit Audit methods: vault_client_audit cubbyhole vault cubbyhole key-value store: vault_client_cubbyhole operator Operator methods: vault_client_operator policy Policy methods: vault_client_policy secrets Secret backends: vault_client_secrets token Token methods: vault_client_token tools Vault tools: vault_client_tools","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Make a vault client — vault_client","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Make a vault client — vault_client","text":"vault_client_$new() vault_client_$api() vault_client_$read() vault_client_$write() vault_client_$delete() vault_client_$list() vault_client_$login() vault_client_$status() vault_client_$unwrap() vault_client_$wrap_lookup()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Make a vault client — vault_client","text":"Create new vault client. typically called directly, via vault_client method.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a vault client — vault_client","text":"","code":"vault_client_$new(addr, tls_config, namespace)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make a vault client — vault_client","text":"addr vault address, including protocol port tls_config TLS config, used namespace namespace, used","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"method-api-","dir":"Reference","previous_headings":"","what":"Method api()","title":"Make a vault client — vault_client","text":"Returns api client object can used directly interact vault server.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a vault client — vault_client","text":"","code":"vault_client_$api()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"method-read-","dir":"Reference","previous_headings":"","what":"Method read()","title":"Make a vault client — vault_client","text":"Read value vault.  can used read value permission read, can also used interface version 1 key-value store (see vault_client_kv1.  Similar vault CLI command vault read.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a vault client — vault_client","text":"","code":"vault_client_$read(path, field = NULL, metadata = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make a vault client — vault_client","text":"path Path secret read, /secret/mysecret field Optional field read secret.  secret stored key/value set (represented R named list) equivalent using [[field]] return value.  default, NULL, returns full set values. metadata Logical, indicating return metadata secret (lease information etc) attribute along values .  Ignored field specified.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"method-write-","dir":"Reference","previous_headings":"","what":"Method write()","title":"Make a vault client — vault_client","text":"Write data vault.  can used write value permission write, can also used interface version 1 key-value store (see vault_client_kv1.  Similar vault CLI command vault write.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a vault client — vault_client","text":"","code":"vault_client_$write(path, data)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make a vault client — vault_client","text":"path Path secret write, /secret/mysecret data named list values write vault path.  replaces existing values.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"method-delete-","dir":"Reference","previous_headings":"","what":"Method delete()","title":"Make a vault client — vault_client","text":"Delete value vault","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a vault client — vault_client","text":"","code":"vault_client_$delete(path)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make a vault client — vault_client","text":"path path delete","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"method-list-","dir":"Reference","previous_headings":"","what":"Method list()","title":"Make a vault client — vault_client","text":"List data vault given path.  can used list keys, etc (e.g., /secret).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a vault client — vault_client","text":"","code":"vault_client_$list(path, full_names = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make a vault client — vault_client","text":"path path list full_names Logical, indicating full paths (relative vault root) returned.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"Make a vault client — vault_client","text":"character vector (zero length keys found).  Paths \"directories\" (.e., contain keys listed) returned trailing forward slash, e.g. path/","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"method-login-","dir":"Reference","previous_headings":"","what":"Method login()","title":"Make a vault client — vault_client","text":"Login vault.  method complicated .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a vault client — vault_client","text":"","code":"vault_client_$login(   ...,   method = \"token\",   mount = NULL,   renew = FALSE,   quiet = FALSE,   token_only = FALSE,   use_cache = TRUE )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make a vault client — vault_client","text":"... Additional named parameters passed underlying method method Authentication method use, string. Supported values include token (default), github, approle, ldap, userpass. mount mount path authentication backend, mounted nonstandard location.  given, assumed backend mounted path corresponding method name. renew Login, even appear hold valid token. FALSE token login nothing. quiet Suppress informational messages token_only Logical, indicating want actually log , instead just generate token return .  given renew ignored always generate new token. use_cache Logical, indicating look session cache token client.  TRUE log save copy token session subsequent calls login vault address use use_cache = TRUE able use token.  Using cached tokens make using authentication backends require authentication external resources (e.g., github) much faster.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"method-status-","dir":"Reference","previous_headings":"","what":"Method status()","title":"Make a vault client — vault_client","text":"Return status vault server, including whether sealed , vault server version.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a vault client — vault_client","text":"","code":"vault_client_$status()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"method-unwrap-","dir":"Reference","previous_headings":"","what":"Method unwrap()","title":"Make a vault client — vault_client","text":"Returns original response inside given wrapping token. vault endpoints used method perform validation checks token, returns original value wire rather JSON string representation , ensures response properly audit-logged.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a vault client — vault_client","text":"","code":"vault_client_$unwrap(token)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make a vault client — vault_client","text":"token Specifies wrapping token ID","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"method-wrap-lookup-","dir":"Reference","previous_headings":"","what":"Method wrap_lookup()","title":"Make a vault client — vault_client","text":"Look properties wrapping token.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"usage-9","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a vault client — vault_client","text":"","code":"vault_client_$wrap_lookup(token)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"arguments-8","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make a vault client — vault_client","text":"token Specifies wrapping token ID lookup","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make a vault client — vault_client","text":"","code":"# We work with a test vault server here (see ?vault_test_server) for # details.  To use it, you must have a vault binary installed on your # system.  These examples will not affect any real running vault # instance that you can connect to. server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start  if (!is.null(server)) {   # Create a vault_client object by providing the address of the vault   # server.   client <- vaultr::vault_client(addr = server$addr)    # The client has many methods, grouped into a structure:   client    # For example, token related commands:   client$token    # The client is not authenticated by default:   try(client$list(\"/secret\"))    # A few methods are unauthenticated and can still be run   client$status()    # Login to the vault, using the token that we know from the server -   # ordinarily you would use a login approach suitable for your needs   # (see the vault documentation).   token <- server$token   client$login(method = \"token\", token = token)    # The vault contains no secrets at present   client$list(\"/secret\")    # Secrets can contain any (reasonable) number of key-value pairs,   # passed in as a list   client$write(\"/secret/users/alice\", list(password = \"s3cret!\"))    # The whole list can be read out   client$read(\"/secret/users/alice\")   # ...or just a field   client$read(\"/secret/users/alice\", \"password\")    # Reading non-existant values returns NULL, not an error   client$read(\"/secret/users/bob\")    client$delete(\"/secret/users/alice\") } #> Error : Have not authenticated against vault #> Verifying token"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":null,"dir":"Reference","previous_headings":"","what":"Vault Audit Devices — vault_client_audit","title":"Vault Audit Devices — vault_client_audit","text":"Vault Audit Devices Vault Audit Devices","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Vault Audit Devices — vault_client_audit","text":"Interact vault's audit devices.  details, see https://developer.hashicorp.com/vault/docs/audit","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Vault Audit Devices — vault_client_audit","text":"vaultr::vault_client_object -> vault_client_audit","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Vault Audit Devices — vault_client_audit","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Vault Audit Devices — vault_client_audit","text":"vault_client_audit$new() vault_client_audit$list() vault_client_audit$enable() vault_client_audit$disable() vault_client_audit$hash()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Vault Audit Devices — vault_client_audit","text":"Create audit object","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Audit Devices — vault_client_audit","text":"","code":"vault_client_audit$new(api_client)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Audit Devices — vault_client_audit","text":"api_client vault_api_client object","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"method-list-","dir":"Reference","previous_headings":"","what":"Method list()","title":"Vault Audit Devices — vault_client_audit","text":"List active audit devices.  Returns data.frame names, paths descriptions active audit devices.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Audit Devices — vault_client_audit","text":"","code":"vault_client_audit$list()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"method-enable-","dir":"Reference","previous_headings":"","what":"Method enable()","title":"Vault Audit Devices — vault_client_audit","text":"endpoint enables new audit device supplied path.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Audit Devices — vault_client_audit","text":"","code":"vault_client_audit$enable(   type,   description = NULL,   options = NULL,   path = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Audit Devices — vault_client_audit","text":"type Name audit device enable description Human readable description audit device options Options configure device .  vary device. must named list strings. path Path mount audit device.  default, type used path.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"method-disable-","dir":"Reference","previous_headings":"","what":"Method disable()","title":"Vault Audit Devices — vault_client_audit","text":"Disable audit device","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Audit Devices — vault_client_audit","text":"","code":"vault_client_audit$disable(path)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Audit Devices — vault_client_audit","text":"path Path audit device remove","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"method-hash-","dir":"Reference","previous_headings":"","what":"Method hash()","title":"Vault Audit Devices — vault_client_audit","text":"hash method used calculate hash data used audit device's hash function salt. can used search audit logs hashed value original value known.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Audit Devices — vault_client_audit","text":"","code":"vault_client_audit$hash(input, device)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Audit Devices — vault_client_audit","text":"input input string hash device path audit device","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_audit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Vault Audit Devices — vault_client_audit","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   client <- server$client()   # By default no audit engines are enabled with the testing server   client$audit$list()    # Create a file-based audit device on a temporary file:   path <- tempfile()   client$audit$enable(\"file\", options = list(file_path = path))   client$audit$list()    # Generate some activity on the server:   client$write(\"/secret/mysecret\", list(key = \"value\"))    # The audit logs contain details about the activity - see the   # vault documentation for details in interpreting this   readLines(path)    # cleanup   server$kill()   unlink(path) }"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":null,"dir":"Reference","previous_headings":"","what":"Vault Authentication Configuration — vault_client_auth","title":"Vault Authentication Configuration — vault_client_auth","text":"Vault Authentication Configuration Vault Authentication Configuration","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Vault Authentication Configuration — vault_client_auth","text":"Interact vault's authentication backends.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Vault Authentication Configuration — vault_client_auth","text":"vaultr::vault_client_object -> vault_client_auth","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"Vault Authentication Configuration — vault_client_auth","text":"approle Interact vault's AppRole authentication.  See vault_client_auth_approle information. github Interact vault's GitHub authentication.  See vault_client_auth_github information. token Interact vault's token authentication.  See vault_client_token information. userpass Interact vault's username/password based authentication.  See vault_client_auth_userpass information. ldap Interact vault's LDAP based authentication.  See vault_client_auth_ldap information.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Vault Authentication Configuration — vault_client_auth","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Vault Authentication Configuration — vault_client_auth","text":"vault_client_auth$new() vault_client_auth$backends() vault_client_auth$list() vault_client_auth$enable() vault_client_auth$disable()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Vault Authentication Configuration — vault_client_auth","text":"Create vault_client_auth object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Authentication Configuration — vault_client_auth","text":"","code":"vault_client_auth$new(api_client)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Authentication Configuration — vault_client_auth","text":"api_client vault_api_client object","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"method-backends-","dir":"Reference","previous_headings":"","what":"Method backends()","title":"Vault Authentication Configuration — vault_client_auth","text":"Return character vector supported authentication backends.  backend x present, can access $auth$x.  Note vault calls authentication methods use backends differentiate R6 methods.  Note backends supported vaultr necessarily supported server - server may enabled backends, may support authentication backends directly supported vaultr.  See $list() method query server supports.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Authentication Configuration — vault_client_auth","text":"","code":"vault_client_auth$backends()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"method-list-","dir":"Reference","previous_headings":"","what":"Method list()","title":"Vault Authentication Configuration — vault_client_auth","text":"List authentication backends supported vault server, including information backends mounted.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Authentication Configuration — vault_client_auth","text":"","code":"vault_client_auth$list(detailed = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Authentication Configuration — vault_client_auth","text":"detailed Logical, indicating detailed information returned","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"method-enable-","dir":"Reference","previous_headings":"","what":"Method enable()","title":"Vault Authentication Configuration — vault_client_auth","text":"Enable authentication backend vault server.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Authentication Configuration — vault_client_auth","text":"","code":"vault_client_auth$enable(type, description = NULL, local = FALSE, path = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Authentication Configuration — vault_client_auth","text":"type type authentication backend (e.g., userpass, github, ldap) description Human-friendly description backend; returned $list() local Specifies auth method local . Local auth methods replicated (secondary) removed replication. path Specifies path enable auth method. Defaults type.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"method-disable-","dir":"Reference","previous_headings":"","what":"Method disable()","title":"Vault Authentication Configuration — vault_client_auth","text":"Disable active authentication backend.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Authentication Configuration — vault_client_auth","text":"","code":"vault_client_auth$disable(path)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Authentication Configuration — vault_client_auth","text":"path path authentication backend disable.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Vault Authentication Configuration — vault_client_auth","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   client <- server$client()    # List configured authentication backends   client$auth$list()    # cleanup   server$kill() }"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":null,"dir":"Reference","previous_headings":"","what":"Vault AppRole Authentication Configuration — vault_client_auth_approle","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Vault AppRole Authentication Configuration Vault AppRole Authentication Configuration","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Interact vault's AppRole authentication backend.  details , see vault documentation https://developer.hashicorp.com/vault/docs/auth/approle","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"vaultr::vault_client_object -> vault_client_auth_approle","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"vault_client_auth_approle$new() vault_client_auth_approle$custom_mount() vault_client_auth_approle$role_list() vault_client_auth_approle$role_write() vault_client_auth_approle$role_read() vault_client_auth_approle$role_delete() vault_client_auth_approle$role_id_read() vault_client_auth_approle$role_id_write() vault_client_auth_approle$secret_id_generate() vault_client_auth_approle$secret_id_list() vault_client_auth_approle$secret_id_read() vault_client_auth_approle$secret_id_delete() vault_client_auth_approle$login()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Create vault_client_approle object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vault_client_auth_approle$new(api_client, mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"api_client vault_api_client object mount Mount point backend","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"method-custom-mount-","dir":"Reference","previous_headings":"","what":"Method custom_mount()","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Set vault_client_auth_approle object custom mount. example, suppose mounted approle authentication backend /approle-dev might use ar <- vault$auth$approle2$custom_mount(\"/approle-dev\") - pattern repeated secret authentication backends.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vault_client_auth_approle$custom_mount(mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"mount String, indicating path engine mounted .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"method-role-list-","dir":"Reference","previous_headings":"","what":"Method role_list()","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"endpoint returns list existing AppRoles method.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vault_client_auth_approle$role_list()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"method-role-write-","dir":"Reference","previous_headings":"","what":"Method role_write()","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Creates new AppRole updates existing AppRole. endpoint supports create update capabilities. can one constraints enabled role. required least one enabled creating updating role.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vault_client_auth_approle$role_write(   role_name,   bind_secret_id = NULL,   secret_id_bound_cidrs = NULL,   token_bound_cidrs = NULL,   policies = NULL,   secret_id_num_uses = NULL,   secret_id_ttl = NULL,   token_num_uses = NULL,   token_ttl = NULL,   token_max_ttl = NULL,   period = NULL,   enable_local_secret_ids = NULL,   token_type = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"role_name Name AppRole bind_secret_id Require secret_id presented logging using AppRole (boolean, default TRUE). secret_id_bound_cidrs Character vector CIDR blocks; set, specifies blocks IP addresses can perform login operation. token_bound_cidrs Character vector set, specifies blocks IP addresses can use auth tokens generated role. policies Character vector policies set tokens issued via AppRole. secret_id_num_uses Number times particular SecretID can used fetch token AppRole, SecretID expire. value zero allow unlimited uses. secret_id_ttl Duration, SecretID expires. token_num_uses Number times issued tokens can used. value 0 means unlimited uses token_ttl Duration set TTL issued tokens renewal time. token_max_ttl Duration, issued token can longer renewed. period duration; set, token generated using AppRole periodic token; long renewed never expires, TTL set token renewal fixed value specified . value modified, token pick new value next renewal. enable_local_secret_ids Boolean, TRUE, secret IDs generated using role cluster local. can set role creation set, reset later. token_type type token generated via role. Can service, batch, default use mount's default (unless changed service tokens).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"method-role-read-","dir":"Reference","previous_headings":"","what":"Method role_read()","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Reads properties existing AppRole.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vault_client_auth_approle$role_read(role_name)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"role_name Name AppRole","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"method-role-delete-","dir":"Reference","previous_headings":"","what":"Method role_delete()","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Deletes existing AppRole method.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vault_client_auth_approle$role_delete(role_name)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"role_name Name AppRole delete","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"method-role-id-read-","dir":"Reference","previous_headings":"","what":"Method role_id_read()","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Reads RoleID existing AppRole.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vault_client_auth_approle$role_id_read(role_name)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"role_name Name AppRole","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"method-role-id-write-","dir":"Reference","previous_headings":"","what":"Method role_id_write()","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Updates RoleID existing AppRole custom value.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vault_client_auth_approle$role_id_write(role_name, role_id)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"role_name Name AppRole (string) role_id Value set RoleID (string)","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"method-secret-id-generate-","dir":"Reference","previous_headings":"","what":"Method secret_id_generate()","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Generates issues new SecretID existing AppRole. Similar tokens, response also contain secret_id_accessor value can used read properties SecretID without divulging SecretID , also delete SecretID AppRole.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vault_client_auth_approle$secret_id_generate(   role_name,   metadata = NULL,   cidr_list = NULL,   token_bound_cidrs = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"role_name Name AppRole. metadata Metadata tied SecretID. named list key-value pairs. metadata set tokens issued SecretID, logged audit logs plaintext. cidr_list Character vector CIDR blocks enforcing secret IDs used specific set IP addresses. bound_cidr_list set role, list CIDR blocks listed subset CIDR blocks listed role. token_bound_cidrs Character vector CIDR blocks; set, specifies blocks IP addresses can use auth tokens generated SecretID. Overrides role-set value must subset.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"method-secret-id-list-","dir":"Reference","previous_headings":"","what":"Method secret_id_list()","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Lists accessors SecretIDs issued AppRole. includes accessors \"custom\" SecretIDs well.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"usage-9","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vault_client_auth_approle$secret_id_list(role_name)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"arguments-8","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"role_name Name AppRole","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"method-secret-id-read-","dir":"Reference","previous_headings":"","what":"Method secret_id_read()","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Reads properties SecretID.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"usage-10","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vault_client_auth_approle$secret_id_read(   role_name,   secret_id,   accessor = FALSE )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"arguments-9","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"role_name Name AppRole secret_id Secret ID attached role accessor Logical, TRUE, treat secret_id accessor rather secret id.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"method-secret-id-delete-","dir":"Reference","previous_headings":"","what":"Method secret_id_delete()","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Delete AppRole secret ID","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"usage-11","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vault_client_auth_approle$secret_id_delete(   role_name,   secret_id,   accessor = FALSE )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"arguments-10","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"role_name Name AppRole secret_id Secret ID attached role accessor Logical, TRUE, treat secret_id accessor rather secret id.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"method-login-","dir":"Reference","previous_headings":"","what":"Method login()","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"Log vault using AppRole authentication. Normally call directly instead use $login method = \"approle\" proving role_id secret_id arguments.  function returns vault token set client token.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"usage-12","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vault_client_auth_approle$login(role_id, secret_id)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"arguments-11","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"role_id RoleID AppRole secret_id SecretID belonging AppRole","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_approle.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Vault AppRole Authentication Configuration — vault_client_auth_approle","text":"","code":"vaultr::vault_client(addr = \"https://localhost:8200\")$auth$approle #> <vault: auth_approle> #>   Commands: #>     custom_mount(mount) #>     help() #>     login(role_id, secret_id) #>     role_delete(role_name) #>     role_id_read(role_name) #>     role_id_write(role_name, role_id) #>     role_list() #>     role_read(role_name) #>     role_write(role_name, bind_secret_id = NULL, #>         secret_id_bound_cidrs = NULL, token_bound_cidrs = NULL, #>         policies = NULL, secret_id_num_uses = NULL, secret_id_ttl = NULL, #>         token_num_uses = NULL, token_ttl = NULL, token_max_ttl = NULL, #>         period = NULL, enable_local_secret_ids = NULL, token_type = NULL) #>     secret_id_delete(role_name, secret_id, accessor = FALSE) #>     secret_id_generate(role_name, metadata = NULL, cidr_list = NULL, #>         token_bound_cidrs = NULL) #>     secret_id_list(role_name) #>     secret_id_read(role_name, secret_id, accessor = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":null,"dir":"Reference","previous_headings":"","what":"Vault GitHub Authentication Configuration — vault_client_auth_github","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"Vault GitHub Authentication Configuration Vault GitHub Authentication Configuration","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"Interact vault's GitHub authentication backend.  details, please see vault documentation https://developer.hashicorp.com/vault/docs/auth/github","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"vaultr::vault_client_object -> vault_client_auth_github","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"vault_client_auth_github$new() vault_client_auth_github$custom_mount() vault_client_auth_github$configure() vault_client_auth_github$configuration() vault_client_auth_github$write() vault_client_auth_github$read() vault_client_auth_github$login()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"Create vault_client_github object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"","code":"vault_client_auth_github$new(api_client, mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"api_client vault_api_client object mount Mount point backend","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"method-custom-mount-","dir":"Reference","previous_headings":"","what":"Method custom_mount()","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"Set vault_client_auth_github object custom mount.  example, suppose mounted github authentication backend /github-myorg might use gh <- vault$auth$github2$custom_mount(\"/github-myorg\") - pattern repeated secret authentication backends.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"","code":"vault_client_auth_github$custom_mount(mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"mount String, indicating path engine mounted .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"method-configure-","dir":"Reference","previous_headings":"","what":"Method configure()","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"Configures connection parameters GitHub-based authentication.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"","code":"vault_client_auth_github$configure(   organization,   base_url = NULL,   ttl = NULL,   max_ttl = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"organization organization users must part (note American spelling). base_url API endpoint use. Useful running GitHub Enterprise API-compatible authentication server. ttl Duration authentication expired max_ttl Maximum duration authentication expired","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"method-configuration-","dir":"Reference","previous_headings":"","what":"Method configuration()","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"Reads connection parameters GitHub-based authentication.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"","code":"vault_client_auth_github$configuration()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"method-write-","dir":"Reference","previous_headings":"","what":"Method write()","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"Write mapping GitHub team user set vault policies.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"","code":"vault_client_auth_github$write(team_name, policies, user = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"team_name String, GitHub team name policies character vector vault policies user team vault access match team user. user Scalar logical - TRUE, team_name interpreted user instead.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"method-read-","dir":"Reference","previous_headings":"","what":"Method read()","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"Write mapping GitHub team user set vault policies.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"","code":"vault_client_auth_github$read(team_name, user = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"team_name String, GitHub team name user Scalar logical - TRUE, team_name interpreted user instead.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"method-login-","dir":"Reference","previous_headings":"","what":"Method login()","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"Log vault using GitHub authentication. Normally call directly instead use $login method = \"github\" proving token argument.  function returns vault token set client token.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"","code":"vault_client_auth_github$login(token = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"token GitHub token authenticate .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_github.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Vault GitHub Authentication Configuration — vault_client_auth_github","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start token <- Sys.getenv(\"VAULT_TEST_AUTH_GITHUB_TOKEN\") if (!is.null(server) && nzchar(token)) {   client <- server$client()    client$auth$enable(\"github\")   # To enable login for members of the organisation \"example\":   client$auth$github$configure(organization = \"example\")   # To map members of the \"robots\" team *within* that organisation   # to the \"defaut\" policy:   client$auth$github$write(\"development\", \"default\")    # Once configured like this, if we have a PAT for a member of   # the \"development\" team saved as an environment variable   # \"VAULT_AUTH_GITHUB_TOKEN\" then doing   #   #   vaultr::vault_client(addr = ..., login = \"github\")   #   # will contact GitHub to verify the user token and vault will   # then issue a client token    # cleanup   server$kill() }"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":null,"dir":"Reference","previous_headings":"","what":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"Vault LDAP Authentication Configuration Vault LDAP Authentication Configuration","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"Interact vault's LDAP authentication backend.  backend can used configure users based presence group membership LDAP server.  information, please see vault documentation https://developer.hashicorp.com/vault/docs/auth/ldap","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"vaultr::vault_client_object -> vault_client_auth_ldap","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"vault_client_auth_ldap$new() vault_client_auth_ldap$custom_mount() vault_client_auth_ldap$configure() vault_client_auth_ldap$configuration() vault_client_auth_ldap$write() vault_client_auth_ldap$read() vault_client_auth_ldap$list() vault_client_auth_ldap$delete() vault_client_auth_ldap$login()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"Create vault_client_auth_ldap object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"","code":"vault_client_auth_ldap$new(api_client, mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"api_client vault_api_client object mount Mount point backend","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"method-custom-mount-","dir":"Reference","previous_headings":"","what":"Method custom_mount()","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"Set vault_client_auth_ldap object custom mount. example, suppose mounted ldap authentication backend /ldap-dev might use ldap <- vault$auth$ldap2$custom_mount(\"/ldap-dev\") - pattern repeated secret authentication backends.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"","code":"vault_client_auth_ldap$custom_mount(mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"mount String, indicating path engine mounted .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"method-configure-","dir":"Reference","previous_headings":"","what":"Method configure()","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"Configures connection parameters LDAP-based authentication. Note many options may well supported. probably best configure vault-LDAP interaction elsewhere, method regarded experimental testing purposes . See official docs (https://developer.hashicorp.com/vault/api-docs/auth/ldap, \"Configure LDAP\") list accepted parameters via dots argument; passed directly (exception url required parameter contatenation multiple values done .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"","code":"vault_client_auth_ldap$configure(url, ...)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"url LDAP server connect . Examples: ldap://ldap.myorg.com, ldaps://ldap.myorg.com:636. Multiple URLs can specified character vector, e.g. c(\"ldap://ldap.myorg.com\", , \"ldap://ldap2.myorg.com\"); tried -order. ... Additional arguments passed body","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"method-configuration-","dir":"Reference","previous_headings":"","what":"Method configuration()","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"Reads connection parameters LDAP-based authentication.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"","code":"vault_client_auth_ldap$configuration()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"method-write-","dir":"Reference","previous_headings":"","what":"Method write()","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"Create update policy","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"","code":"vault_client_auth_ldap$write(name, policies, user = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"name name group (user) policies character vector vault policies group (user) vault access. user Scalar logical - TRUE, name interpreted user instead group.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"method-read-","dir":"Reference","previous_headings":"","what":"Method read()","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"Write mapping LDAP group user set vault policies.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"","code":"vault_client_auth_ldap$read(name, user = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"name name group (user) user Scalar logical - TRUE, name interpreted user instead group.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"method-list-","dir":"Reference","previous_headings":"","what":"Method list()","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"List groups users known vault via LDAP","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"","code":"vault_client_auth_ldap$list(user = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"user Scalar logical - TRUE, list users instead groups.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"method-delete-","dir":"Reference","previous_headings":"","what":"Method delete()","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"Delete group user (just mapping vault, data LDAP server modified).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"","code":"vault_client_auth_ldap$delete(name, user = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"name name group (user) user Scalar logical - TRUE, name interpreted user instead group.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"method-login-","dir":"Reference","previous_headings":"","what":"Method login()","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"Log vault using LDAP authentication. Normally call directly instead use $login method = \"ldap\" proving username optionally password argument. argument.  function returns vault token set client token.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"","code":"vault_client_auth_ldap$login(username, password)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"username Username authenticate password Password authenticate . omitted NULL session interactive, password prompted .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_ldap.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Vault LDAP Authentication Configuration — vault_client_auth_ldap","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   root <- server$client()    # The ldap authentication backend is not enabled by default,   # so we need to enable it first   root$auth$enable(\"ldap\")    # Considerable configuration is required to make this work. Here   # we use the public server available at   # https://www.forumsys.com/2022/05/10/online-ldap-test-server/   root$auth$ldap$configure(     url = \"ldap://ldap.forumsys.com\",     binddn = \"cn=read-only-admin,dc=example,dc=com\",     bindpass = \"password\",     userdn = \"dc=example,dc=com\",     userattr = \"uid\",     groupdn = \"dc=example,dc=com\",     groupattr = \"ou\",     groupfilter = \"(uniqueMember={{.UserDN}})\")    # You can associate groups of users with policies:   root$auth$ldap$write(\"scientists\", \"default\")    # Create a new client and login with this user:   newton <- vaultr::vault_client(     addr = server$addr,     login = \"ldap\",     username = \"newton\",     password = \"password\")    # (it is not recommended to login with the password like this as   # it will end up in the command history, but in interactive use   # you will be prompted securely for password)    # Isaac Newton has now logged in and has only \"default\" policies   newton$auth$token$lookup_self()$policies    # (wheras our original root user has the \"root\" policy)   root$auth$token$lookup_self()$policies } #> ok, duration: 2764800 s (~32d) #> [1] \"root\""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":null,"dir":"Reference","previous_headings":"","what":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"Vault Username/Password Authentication Configuration Vault Username/Password Authentication Configuration","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"Interact vault's username/password authentication backend. backend can used configure basic username+password authentication, suitable human users.  information, please see vault documentation https://developer.hashicorp.com/vault/docs/auth/userpass","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"vaultr::vault_client_object -> vault_client_auth_userpass","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"vault_client_auth_userpass$new() vault_client_auth_userpass$custom_mount() vault_client_auth_userpass$write() vault_client_auth_userpass$read() vault_client_auth_userpass$delete() vault_client_auth_userpass$update_password() vault_client_auth_userpass$update_policies() vault_client_auth_userpass$list() vault_client_auth_userpass$login()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"Create vault_client_userpass object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"","code":"vault_client_auth_userpass$new(api_client, mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"api_client vault_api_client object mount Mount point backend","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"method-custom-mount-","dir":"Reference","previous_headings":"","what":"Method custom_mount()","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"Set vault_client_auth_userpass object custom mount.  example, suppose mounted userpass authentication backend /userpass2 might use <- vault$auth$userpass2$custom_mount(\"/userpass2\") - pattern repeated secret authentication backends.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"","code":"vault_client_auth_userpass$custom_mount(mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"mount String, indicating path engine mounted .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"method-write-","dir":"Reference","previous_headings":"","what":"Method write()","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"Create update user.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"","code":"vault_client_auth_userpass$write(   username,   password = NULL,   policies = NULL,   ttl = NULL,   max_ttl = NULL,   bound_cidrs = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"username Username user password Password user (required creating user ) policies Character vector policies user ttl lease duration decides login expiration max_ttl Maximum duration login expire bound_cidrs Character vector CIDRs.  set, restricts usage login token client IPs falling within range specified CIDR(s).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"method-read-","dir":"Reference","previous_headings":"","what":"Method read()","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"Reads properties existing username.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"","code":"vault_client_auth_userpass$read(username)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"username Username read","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"method-delete-","dir":"Reference","previous_headings":"","what":"Method delete()","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"Delete user","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"","code":"vault_client_auth_userpass$delete(username)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"username Username delete","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"method-update-password-","dir":"Reference","previous_headings":"","what":"Method update_password()","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"Update password user","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"","code":"vault_client_auth_userpass$update_password(username, password)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"username Username user update password New password user","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"method-update-policies-","dir":"Reference","previous_headings":"","what":"Method update_policies()","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"Update vault policies user","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"","code":"vault_client_auth_userpass$update_policies(username, policies)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"username Username user update policies Character vector policies user","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"method-list-","dir":"Reference","previous_headings":"","what":"Method list()","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"List users known vault","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"","code":"vault_client_auth_userpass$list()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"method-login-","dir":"Reference","previous_headings":"","what":"Method login()","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"Log vault using username/password authentication.  Normally call directly instead use $login method = \"userpass\" proving username argument optionally password argument.  function returns vault token set client token.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"","code":"vault_client_auth_userpass$login(username, password = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"username Username authenticate password Password authenticate . omitted NULL session interactive, password prompted .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_auth_userpass.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Vault Username/Password Authentication Configuration — vault_client_auth_userpass","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   root <- server$client()    # The userpass authentication backend is not enabled by default,   # so we need to enable it first   root$auth$enable(\"userpass\")    # Then we can add users:   root$auth$userpass$write(\"alice\", \"p4ssw0rd\")    # Create a new client and login with this user:   alice <- vaultr::vault_client(     addr = server$addr,     login = \"userpass\",     username = \"alice\",     password = \"p4ssw0rd\")    # (it is not recommended to login with the password like this as   # it will end up in the command history, but in interactive use   # you will be prompted securely for password)    # Alice has now logged in and has only \"default\" policies   alice$auth$token$lookup_self()$policies    # (wheras our original root user has the \"root\" policy)   root$auth$token$lookup_self()$policies } #> ok, duration: 2764800 s (~32d) #> [1] \"root\""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":null,"dir":"Reference","previous_headings":"","what":"Cubbyhole secret store — vault_client_cubbyhole","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"Cubbyhole secret store Cubbyhole secret store","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"Interact vault's cubbyhole key-value store.  useful storing simple key-value data without versioning metadata (c.f. vault_client_kv2) scoped current token accessible anyone else.  details please see vault documentation https://developer.hashicorp.com/vault/docs/secrets/cubbyhole","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"vaultr::vault_client_object -> vault_client_cubbyhole","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"vault_client_cubbyhole$new() vault_client_cubbyhole$read() vault_client_cubbyhole$write() vault_client_cubbyhole$list() vault_client_cubbyhole$delete()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"Create vault_client_cubbyhole object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"","code":"vault_client_cubbyhole$new(api_client)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"api_client vault_api_client object","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"method-read-","dir":"Reference","previous_headings":"","what":"Method read()","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"Read value cubbyhole","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"","code":"vault_client_cubbyhole$read(path, field = NULL, metadata = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"path Path secret read, /cubbyhole/mysecret field Optional field read secret.  secret stored key/value set (represented R named list) equivalent using [[field]] return value.  default, NULL, returns full set values. metadata Logical, indicating return metadata secret (lease information etc) attribute along values .  Ignored field specified.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"method-write-","dir":"Reference","previous_headings":"","what":"Method write()","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"Write data cubbyhole.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"","code":"vault_client_cubbyhole$write(path, data)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"path Path secret write, /cubbyhole/mysecret data named list values write vault path.  replaces existing values.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"method-list-","dir":"Reference","previous_headings":"","what":"Method list()","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"List data vault give path.  can used list keys, etc (e.g., /cubbyhole).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"","code":"vault_client_cubbyhole$list(path, full_names = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"path path list full_names Logical, indicating full paths (relative vault root) returned. value character vector (zero length keys found).  Paths \"directories\" (.e., contain keys listed) returned trailing forward slash, e.g. path/","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"method-delete-","dir":"Reference","previous_headings":"","what":"Method delete()","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"Delete value vault","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"","code":"vault_client_cubbyhole$delete(path)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"path path delete","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_cubbyhole.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Cubbyhole secret store — vault_client_cubbyhole","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   client <- server$client()    # Shorter path for easier reading:   cubbyhole <- client$secrets$cubbyhole   cubbyhole    # Write a value   cubbyhole$write(\"cubbyhole/secret\", list(key = \"value\"))   # List it   cubbyhole$list(\"cubbyhole\")   # Read it   cubbyhole$read(\"cubbyhole/secret\")   # Delete it   cubbyhole$delete(\"cubbyhole/secret\")    # cleanup   server$kill() }"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":null,"dir":"Reference","previous_headings":"","what":"Key-Value Store (Version 1) — vault_client_kv1","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"Key-Value Store (Version 1) Key-Value Store (Version 1)","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"Interact vault's version 1 key-value store.  useful storing simple key-value data without versioning metadata (see vault_client_kv2 richer key-value store). vault version 0.12.0 mounted default /secret.  can accessed vault either $read, $write, $list $delete methods main vault_client object $kv1 member secrets member main vault client (vault_client_secrets)","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"vaultr::vault_client_object -> vault_client_kv1","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"vault_client_kv1$new() vault_client_kv1$custom_mount() vault_client_kv1$read() vault_client_kv1$write() vault_client_kv1$list() vault_client_kv1$delete()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"Create vault_client_kv1 object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"","code":"vault_client_kv1$new(api_client, mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"api_client vault_api_client object mount Mount point backend","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"method-custom-mount-","dir":"Reference","previous_headings":"","what":"Method custom_mount()","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"Set vault_client_kv1 object custom mount.  example, suppose mounted another copy kv1 secret backend /secret2 might use kv <- vault$secrets$kv1$custom_mount(\"/secret2\") - pattern repeated secret authentication backends.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"","code":"vault_client_kv1$custom_mount(mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"mount String, indicating path engine mounted .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"method-read-","dir":"Reference","previous_headings":"","what":"Method read()","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"Read value vault.  can used read value permission read store.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"","code":"vault_client_kv1$read(path, field = NULL, metadata = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"path Path secret read, /secret/mysecret field Optional field read secret.  secret stored key/value set (represented R named list) equivalent using [[field]] return value.  default, NULL, returns full set values. metadata Logical, indicating return metadata secret (lease information etc) attribute along values .  Ignored field specified.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"method-write-","dir":"Reference","previous_headings":"","what":"Method write()","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"Write data vault.  can used write value permission write store.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"","code":"vault_client_kv1$write(path, data)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"path Path secret write, /secret/mysecret data named list values write vault path.  replaces existing values.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"method-list-","dir":"Reference","previous_headings":"","what":"Method list()","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"List data vault give path.  can used list keys, etc (e.g., /secret).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"","code":"vault_client_kv1$list(path, full_names = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"path path list full_names Logical, indicating full paths (relative vault root) returned. value character vector (zero length keys found).  Paths \"directories\" (.e., contain keys listed) returned trailing forward slash, e.g. path/","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"method-delete-","dir":"Reference","previous_headings":"","what":"Method delete()","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"Delete value vault","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"","code":"vault_client_kv1$delete(path)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"path path delete","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv1.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Key-Value Store (Version 1) — vault_client_kv1","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   client <- server$client()    # Write secrets   client$secrets$kv1$write(\"/secret/path/mysecret\", list(key = \"value\"))    # List secrets - note the trailing \"/\" indicates a folder   client$secrets$kv1$list(\"/secret\")   client$secrets$kv1$list(\"/secret/path\")    # Read secrets   client$secrets$kv1$read(\"/secret/path/mysecret\")   client$secrets$kv1$read(\"/secret/path/mysecret\", field = \"key\")    # Delete secrets   client$secrets$kv1$delete(\"/secret/path/mysecret\")   client$secrets$kv1$read(\"/secret/path/mysecret\")    # cleanup   server$kill() }"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":null,"dir":"Reference","previous_headings":"","what":"Key-Value Store (Version 2) — vault_client_kv2","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"Key-Value Store (Version 2) Key-Value Store (Version 2)","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"Interact vault's version 2 key-value store.  useful storing simple key-value data can versioned storing metadata alongside secrets (see vault_client_kv1 simpler key-value store, see https://developer.hashicorp.com/vault/docs/secrets/kv/kv-v2 detailed information secret store. kv2 store can mounted anywhere, methods accept mount argument.  different CLI lets try read values vault path, similar secret auth backends accept arguments like -mount-point.  kv2 store mounted /project-secrets example, vault client vault one write     leading part path secret within kv2 store match mount point, vaultr throw error.  approach results predictable error messages, though little typing CLI vault client.","code":"vault$secrets$kv2$get(\"/project-secrets/mysecret\",                       mount = \"project-secrets\") kv2 <- vault$secrets$kv2$custom_mount(\"project-secrets\") kv2$get(\"mysecret\")"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"vaultr::vault_client_object -> vault_client_kv2","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"vault_client_kv2$new() vault_client_kv2$config() vault_client_kv2$custom_mount() vault_client_kv2$delete() vault_client_kv2$destroy() vault_client_kv2$get() vault_client_kv2$list() vault_client_kv2$metadata_get() vault_client_kv2$metadata_put() vault_client_kv2$metadata_delete() vault_client_kv2$put() vault_client_kv2$undelete()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"Create vault_client_kv2 object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"","code":"vault_client_kv2$new(api_client, mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"api_client vault_api_client object mount Mount point backend","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"method-config-","dir":"Reference","previous_headings":"","what":"Method config()","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"Fetch configuration kv2 store. Returns named list values, contents depend vault version.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"","code":"vault_client_kv2$config(mount = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"mount Custom mount path use store (see Details).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"method-custom-mount-","dir":"Reference","previous_headings":"","what":"Method custom_mount()","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"Set vault_client_kv2 object custom mount.  example, suppose mounted another copy kv2 secret backend /secret2 might use kv <- vault$secrets$kv2$custom_mount(\"/secret2\") - pattern repeated secret authentication backends.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"","code":"vault_client_kv2$custom_mount(mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"mount String, indicating path engine mounted .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"method-delete-","dir":"Reference","previous_headings":"","what":"Method delete()","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"Delete secret vault.  marks version deleted stop returned reads, underlying data removed. delete can undone using undelete method.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"","code":"vault_client_kv2$delete(path, version = NULL, mount = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"path Path delete version Optional version delete.  NULL (default) latest version secret deleted. Otherwise, version can vector integer versions delete. mount Custom mount path use store (see Details).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"method-destroy-","dir":"Reference","previous_headings":"","what":"Method destroy()","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"Delete secret entirely.  Unlike delete operation irreversible like delete operation vault_client_kv1 stores.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"","code":"vault_client_kv2$destroy(path, version, mount = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"path Path delete version Version numbers delete, vector integers (required) mount Custom mount path use store (see Details).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"method-get-","dir":"Reference","previous_headings":"","what":"Method get()","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"Read secret vault","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"","code":"vault_client_kv2$get(   path,   version = NULL,   field = NULL,   metadata = FALSE,   mount = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"path Path secret read version Optional version secret read.  NULL (default) recent version read. Otherwise must scalar integer. field Optional field read secret.  secret stored key/value set (represented R named list) equivalent using [[field]] return value.  default, NULL, returns full set values. metadata Logical, indicating return metadata secret (lease information etc) attribute along values .  Ignored field specified. mount Custom mount path use store (see Details).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"method-list-","dir":"Reference","previous_headings":"","what":"Method list()","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"List data vault give path.  can used list keys, etc (e.g., /secret).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"","code":"vault_client_kv2$list(path, full_names = FALSE, mount = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"path path list full_names Logical, indicating full paths (relative vault root) returned. mount Custom mount path use store (see Details). value character vector (zero length keys found).  Paths \"directories\" (.e., contain keys listed) returned trailing forward slash, e.g. path/","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"method-metadata-get-","dir":"Reference","previous_headings":"","what":"Method metadata_get()","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"Read secret metadata versions specified path","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"","code":"vault_client_kv2$metadata_get(path, mount = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"path Path secret read metadata mount Custom mount path use store (see Details).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"method-metadata-put-","dir":"Reference","previous_headings":"","what":"Method metadata_put()","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"Update metadata secret.  allowed even secret yet exist, though requires create vault permission path.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"","code":"vault_client_kv2$metadata_put(   path,   cas_required = NULL,   max_versions = NULL,   mount = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"arguments-8","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"path Path secret update metadata cas_required Logical, indicating true key require cas parameter set write requests (see put). FALSE, backend's configuration used. max_versions Integer, indicating maximum number versions keep per key.  set, backend's configured max version used. key configured allowed versions oldest version permanently deleted. mount Custom mount path use store (see Details).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"method-metadata-delete-","dir":"Reference","previous_headings":"","what":"Method metadata_delete()","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"method permanently deletes key metadata version data specified key. version history removed.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"usage-9","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"","code":"vault_client_kv2$metadata_delete(path, mount = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"arguments-9","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"path Path delete mount Custom mount path use store (see Details).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"method-put-","dir":"Reference","previous_headings":"","what":"Method put()","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"Create update secret store.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"usage-10","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"","code":"vault_client_kv2$put(path, data, cas = NULL, mount = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"arguments-10","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"path Path secret write, /secret/mysecret data named list values write vault path. cas Integer, indicating \"cas\" value use \"Check--Set\" operation. set write allowed. set 0 write allowed key exist. index non-zero write allowed key's current version matches version specified cas parameter. mount Custom mount path use store (see Details).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"method-undelete-","dir":"Reference","previous_headings":"","what":"Method undelete()","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"Undeletes data provided version path key-value store. restores data, allowing returned get requests.  works data deleted $delete $destroy.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"usage-11","dir":"Reference","previous_headings":"","what":"Usage","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"","code":"vault_client_kv2$undelete(path, version, mount = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"arguments-11","dir":"Reference","previous_headings":"","what":"Arguments","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"path path undelete version Integer vector versions undelete mount Custom mount path use store (see Details).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_kv2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Key-Value Store (Version 2) — vault_client_kv2","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   client <- server$client()   # With the test server as created by vaultr, the kv2 storage   # engine is not enabled.  To use the kv2 store we must first   # enable it; the command below will add it at the path /kv on   # our vault server   client$secrets$enable(\"kv\", version = 2)    # For ease of reading, create a 'kv' object for interacting with   # the store (see below for the calls without this object)   kv <- client$secrets$kv2$custom_mount(\"kv\")   kv$config()    # The version-2 kv store can be treated largely the same as the   # version-1 store, though with slightly different command names   # (put instead of write, get instead of read)   kv$put(\"/kv/path/secret\", list(key = \"value\"))   kv$get(\"/kv/path/secret\")    # But it also allows different versions to be stored at the same path:   kv$put(\"/kv/path/secret\", list(key = \"s3cret!\"))   kv$get(\"/kv/path/secret\")    # Old versions can be retrieved still:   kv$get(\"/kv/path/secret\", version = 1)    # And metadata about versions can be retrieved   kv$metadata_get(\"/kv/path/secret\")    # cleanup   server$kill() }"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_object.html","id":null,"dir":"Reference","previous_headings":"","what":"Base object type — vault_client_object","title":"Base object type — vault_client_object","text":"Base object type Base object type","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_object.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Base object type — vault_client_object","text":"Base object used vaultr objects","code":""},{"path":[]},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_object.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Base object type — vault_client_object","text":"vault_client_object$new() vault_client_object$format() vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_object.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Base object type — vault_client_object","text":"Construct object","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_object.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Base object type — vault_client_object","text":"","code":"vault_client_object$new(description)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_object.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Base object type — vault_client_object","text":"description Description object, printed","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_object.html","id":"method-format-","dir":"Reference","previous_headings":"","what":"Method format()","title":"Base object type — vault_client_object","text":"Format method, overriding R6 default","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_object.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Base object type — vault_client_object","text":"","code":"vault_client_object$format(brief = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_object.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Base object type — vault_client_object","text":"brief Logical, indicating full format brief (one line) format.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_object.html","id":"method-help-","dir":"Reference","previous_headings":"","what":"Method help()","title":"Base object type — vault_client_object","text":"Display help object","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_object.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Base object type — vault_client_object","text":"","code":"vault_client_object$help()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_object.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Base object type — vault_client_object","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start  if (!is.null(server)) {   client <- vaultr::vault_client(addr = server$addr)   client$operator$format()   client$operator$format(TRUE) } #> [1] \"Administration commands for vault operators\""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":null,"dir":"Reference","previous_headings":"","what":"Vault Administration — vault_client_operator","title":"Vault Administration — vault_client_operator","text":"Vault Administration Vault Administration","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Vault Administration — vault_client_operator","text":"Administration commands vault operators.  commands used without consulting vault documentation affect administration vault server, included completeness.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Vault Administration — vault_client_operator","text":"vaultr::vault_client_object -> vault_client_operator","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Vault Administration — vault_client_operator","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Vault Administration — vault_client_operator","text":"vault_client_operator$new() vault_client_operator$key_status() vault_client_operator$is_initialized() vault_client_operator$init() vault_client_operator$leader_status() vault_client_operator$rekey_status() vault_client_operator$rekey_start() vault_client_operator$rekey_cancel() vault_client_operator$rekey_submit() vault_client_operator$rotate() vault_client_operator$seal() vault_client_operator$seal_status() vault_client_operator$unseal()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Vault Administration — vault_client_operator","text":"Create vault_client_operator object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Administration — vault_client_operator","text":"","code":"vault_client_operator$new(api_client)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Administration — vault_client_operator","text":"api_client vault_api_client object","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"method-key-status-","dir":"Reference","previous_headings":"","what":"Method key_status()","title":"Vault Administration — vault_client_operator","text":"Return information current encryption key Vault.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Administration — vault_client_operator","text":"","code":"vault_client_operator$key_status()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"method-is-initialized-","dir":"Reference","previous_headings":"","what":"Method is_initialized()","title":"Vault Administration — vault_client_operator","text":"Returns initialization status Vault","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Administration — vault_client_operator","text":"","code":"vault_client_operator$is_initialized()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"method-init-","dir":"Reference","previous_headings":"","what":"Method init()","title":"Vault Administration — vault_client_operator","text":"endpoint initializes new Vault. Vault must previously initialized.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Administration — vault_client_operator","text":"","code":"vault_client_operator$init(secret_shares, secret_threshold)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Administration — vault_client_operator","text":"secret_shares Integer, specifying number shares split master key secret_threshold Integer, specifying number shares required reconstruct master key. must less equal secret_shares","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"method-leader-status-","dir":"Reference","previous_headings":"","what":"Method leader_status()","title":"Vault Administration — vault_client_operator","text":"Check high availability status current leader Vault","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Administration — vault_client_operator","text":"","code":"vault_client_operator$leader_status()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"method-rekey-status-","dir":"Reference","previous_headings":"","what":"Method rekey_status()","title":"Vault Administration — vault_client_operator","text":"Reads configuration progress current rekey attempt","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Administration — vault_client_operator","text":"","code":"vault_client_operator$rekey_status()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"method-rekey-start-","dir":"Reference","previous_headings":"","what":"Method rekey_start()","title":"Vault Administration — vault_client_operator","text":"method begins new rekey attempt. single rekey attempt can take place time, changing parameters rekey requires cancelling starting new rekey, also provide new nonce.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Administration — vault_client_operator","text":"","code":"vault_client_operator$rekey_start(secret_shares, secret_threshold)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Administration — vault_client_operator","text":"secret_shares Integer, specifying number shares split master key secret_threshold Integer, specifying number shares required reconstruct master key. must less equal secret_shares","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"method-rekey-cancel-","dir":"Reference","previous_headings":"","what":"Method rekey_cancel()","title":"Vault Administration — vault_client_operator","text":"method cancels -progress rekey. clears rekey settings well progress made. must called change parameters rekey. Note verification still part rekey. rekeying cancelled verification flow, current unseal keys remain valid.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Administration — vault_client_operator","text":"","code":"vault_client_operator$rekey_cancel()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"method-rekey-submit-","dir":"Reference","previous_headings":"","what":"Method rekey_submit()","title":"Vault Administration — vault_client_operator","text":"method used enter single master key share progress rekey Vault. threshold number master key shares reached, Vault complete rekey. Otherwise, method must called multiple times threshold met. rekey nonce operation must provided call.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Administration — vault_client_operator","text":"","code":"vault_client_operator$rekey_submit(key, nonce)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Administration — vault_client_operator","text":"key Specifies single master share key (string) nonce Specifies nonce rekey operation (string)","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"method-rotate-","dir":"Reference","previous_headings":"","what":"Method rotate()","title":"Vault Administration — vault_client_operator","text":"method triggers rotation backend encryption key. key used encrypt data written storage backend, provided operators. operation done online. Future values encrypted new key, old values decrypted previous encryption keys.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"usage-9","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Administration — vault_client_operator","text":"","code":"vault_client_operator$rotate()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"method-seal-","dir":"Reference","previous_headings":"","what":"Method seal()","title":"Vault Administration — vault_client_operator","text":"Seal vault, preventing access . vault sealed, must unsealed use.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"usage-10","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Administration — vault_client_operator","text":"","code":"vault_client_operator$seal()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"method-seal-status-","dir":"Reference","previous_headings":"","what":"Method seal_status()","title":"Vault Administration — vault_client_operator","text":"Check seal status Vault.  method can used even client authenticated vault (case sealed vault).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"usage-11","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Administration — vault_client_operator","text":"","code":"vault_client_operator$seal_status()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"method-unseal-","dir":"Reference","previous_headings":"","what":"Method unseal()","title":"Vault Administration — vault_client_operator","text":"Submit portion key unseal vault. method typically called multiple different operators assemble master key.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"usage-12","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Administration — vault_client_operator","text":"","code":"vault_client_operator$unseal(key, reset = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Administration — vault_client_operator","text":"key master key share reset Logical, indicating unseal process start started .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_operator.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Vault Administration — vault_client_operator","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   client <- server$client()    # Our test server is by default unsealed:   client$status()$sealed    # We can seal the vault to prevent all access:   client$operator$seal()   client$status()$sealed    # And then unseal it again   client$operator$unseal(server$keys)   client$status()$sealed } #> [1] FALSE"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":null,"dir":"Reference","previous_headings":"","what":"Vault Policy Configuration — vault_client_policy","title":"Vault Policy Configuration — vault_client_policy","text":"Vault Policy Configuration Vault Policy Configuration","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Vault Policy Configuration — vault_client_policy","text":"Interact vault's policies.  get started, may want read policies described vault manual, : https://developer.hashicorp.com/vault/docs/concepts/policies","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Vault Policy Configuration — vault_client_policy","text":"vaultr::vault_client_object -> vault_client_policy","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Vault Policy Configuration — vault_client_policy","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Vault Policy Configuration — vault_client_policy","text":"vault_client_policy$new() vault_client_policy$delete() vault_client_policy$list() vault_client_policy$read() vault_client_policy$write()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Vault Policy Configuration — vault_client_policy","text":"Create vault_client_policy object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Policy Configuration — vault_client_policy","text":"","code":"vault_client_policy$new(api_client)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Policy Configuration — vault_client_policy","text":"api_client vault_api_client object","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"method-delete-","dir":"Reference","previous_headings":"","what":"Method delete()","title":"Vault Policy Configuration — vault_client_policy","text":"endpoint deletes policy given name. immediately affect users associated policy.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Policy Configuration — vault_client_policy","text":"","code":"vault_client_policy$delete(name)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Policy Configuration — vault_client_policy","text":"name Specifies name policy delete.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"method-list-","dir":"Reference","previous_headings":"","what":"Method list()","title":"Vault Policy Configuration — vault_client_policy","text":"Lists configured policies.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Policy Configuration — vault_client_policy","text":"","code":"vault_client_policy$list()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"method-read-","dir":"Reference","previous_headings":"","what":"Method read()","title":"Vault Policy Configuration — vault_client_policy","text":"Retrieve policy body named policy","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Policy Configuration — vault_client_policy","text":"","code":"vault_client_policy$read(name)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Policy Configuration — vault_client_policy","text":"name Specifies name policy retrieve","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"method-write-","dir":"Reference","previous_headings":"","what":"Method write()","title":"Vault Policy Configuration — vault_client_policy","text":"Create update policy.  policy updated, takes effect immediately associated users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Policy Configuration — vault_client_policy","text":"","code":"vault_client_policy$write(name, rules)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Policy Configuration — vault_client_policy","text":"name Name policy update rules Specifies policy document.  string \"HashiCorp configuration language\".  present must read single string (character vector strings); future versions vaultr may allow flexible specification @filename","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_policy.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Vault Policy Configuration — vault_client_policy","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   client <- server$client()    # The test server starts with only the policies \"root\" (do   # everything) and \"default\" (do nothing).   client$policy$list()    # Here let's make a policy that allows reading secrets from the   # path /secret/develop/* but nothing else   rules <- 'path \"secret/develop/*\" {policy = \"read\"}'   client$policy$write(\"read-secret-develop\", rules)    # Our new rule is listed and can be read   client$policy$list()   client$policy$read(\"read-secret-develop\")    # For testing, let's create a secret under this path, and under   # a different path:   client$write(\"/secret/develop/password\", list(value = \"password\"))   client$write(\"/secret/production/password\", list(value = \"k2e89be@rdC#\"))    # Create a token that can use this policy:   token <- client$auth$token$create(policies = \"read-secret-develop\")    # Login to the vault using this token:   alice <- vaultr::vault_client(addr = server$addr,                                 login = \"token\", token = token)    # We can read the paths that we have been granted access to:   alice$read(\"/secret/develop/password\")    # We can't read secrets that are outside our path:   try(alice$read(\"/secret/production/password\"))    # And we can't write:   try(alice$write(\"/secret/develop/password\", list(value = \"secret\")))    # cleanup   server$kill() } #> Verifying token #> Error : While reading secret/production/password: #>  1 error occurred: #> \t* permission denied #>  #>  #> Error : 1 error occurred: #> \t* permission denied #>  #>"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":null,"dir":"Reference","previous_headings":"","what":"Vault Secret Configuration — vault_client_secrets","title":"Vault Secret Configuration — vault_client_secrets","text":"Vault Secret Configuration Vault Secret Configuration","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Vault Secret Configuration — vault_client_secrets","text":"Interact vault's secret backends.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Vault Secret Configuration — vault_client_secrets","text":"vaultr::vault_client_object -> vault_client_secrets","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"Vault Secret Configuration — vault_client_secrets","text":"cubbyhole cubbyhole backend: vault_client_cubbyhole kv1 version 1 key-value backend: vault_client_kv1 kv2 version 2 key-value backend: vault_client_kv2 transit transit backend: vault_client_transit","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Vault Secret Configuration — vault_client_secrets","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Vault Secret Configuration — vault_client_secrets","text":"vault_client_secrets$new() vault_client_secrets$disable() vault_client_secrets$enable() vault_client_secrets$list() vault_client_secrets$move()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Vault Secret Configuration — vault_client_secrets","text":"Create vault_client_secrets object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Secret Configuration — vault_client_secrets","text":"","code":"vault_client_secrets$new(api_client)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Secret Configuration — vault_client_secrets","text":"api_client vault_api_client object","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"method-disable-","dir":"Reference","previous_headings":"","what":"Method disable()","title":"Vault Secret Configuration — vault_client_secrets","text":"Disable previously-enabled secret engine","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Secret Configuration — vault_client_secrets","text":"","code":"vault_client_secrets$disable(path)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Secret Configuration — vault_client_secrets","text":"path Path secret engine","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"method-enable-","dir":"Reference","previous_headings":"","what":"Method enable()","title":"Vault Secret Configuration — vault_client_secrets","text":"Enable secret backend vault server","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Secret Configuration — vault_client_secrets","text":"","code":"vault_client_secrets$enable(   type,   path = type,   description = NULL,   version = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Secret Configuration — vault_client_secrets","text":"type type secret backend (e.g., transit, kv). path Specifies path enable auth method. Defaults type. description Human-friendly description backend; returned $list() version Used kv backend, integer used select vault_client_kv1 vault_client_kv2 engines.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"method-list-","dir":"Reference","previous_headings":"","what":"Method list()","title":"Vault Secret Configuration — vault_client_secrets","text":"List enabled secret engines","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Secret Configuration — vault_client_secrets","text":"","code":"vault_client_secrets$list(detailed = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Secret Configuration — vault_client_secrets","text":"detailed Logical, indicating detailed output wanted.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"method-move-","dir":"Reference","previous_headings":"","what":"Method move()","title":"Vault Secret Configuration — vault_client_secrets","text":"Move path secret engine mounted ","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Secret Configuration — vault_client_secrets","text":"","code":"vault_client_secrets$move(from, to)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Secret Configuration — vault_client_secrets","text":"Original path New path","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_secrets.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Vault Secret Configuration — vault_client_secrets","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   client <- server$client()    # To remove the default version 1 kv store and replace with a   # version 2 store:   client$secrets$disable(\"/secret\")   client$secrets$enable(\"kv\", \"/secret\", version = 2)    # cleanup   server$kill() }"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":null,"dir":"Reference","previous_headings":"","what":"Vault Tokens — vault_client_token","title":"Vault Tokens — vault_client_token","text":"Vault Tokens Vault Tokens","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Vault Tokens — vault_client_token","text":"Interact vault's token methods.  includes support querying, creating deleting tokens.  Tokens fundamental way vault works, lot methods .  vault documentation page devoted token concepts: https://developer.hashicorp.com/vault/docs/concepts/tokens - also page commands: https://developer.hashicorp.com/vault/docs/commands/token - names similar names used .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"token-accessors","dir":"Reference","previous_headings":"","what":"Token Accessors","title":"Vault Tokens — vault_client_token","text":"Many methods use \"token accessors\" - whenever token created, \"accessor\" created time.  another token can used perform limited actions token Look token's properties (including actual token ID) Look token's capabilities path Revoke token However, accessors used login, retrieve actual token .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Vault Tokens — vault_client_token","text":"vaultr::vault_client_object -> vault_client_token","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Vault Tokens — vault_client_token","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Vault Tokens — vault_client_token","text":"vault_client_token$new() vault_client_token$list() vault_client_token$capabilities() vault_client_token$capabilities_self() vault_client_token$capabilities_accessor() vault_client_token$client() vault_client_token$create() vault_client_token$lookup() vault_client_token$lookup_self() vault_client_token$lookup_accessor() vault_client_token$renew() vault_client_token$renew_self() vault_client_token$revoke() vault_client_token$revoke_self() vault_client_token$revoke_accessor() vault_client_token$revoke_and_orphan() vault_client_token$role_read() vault_client_token$role_list() vault_client_token$role_write() vault_client_token$role_delete() vault_client_token$tidy() vault_client_token$login()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Vault Tokens — vault_client_token","text":"Create vault_client_token object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$new(api_client)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"api_client vault_api_client object","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-list-","dir":"Reference","previous_headings":"","what":"Method list()","title":"Vault Tokens — vault_client_token","text":"List token accessors, returning character vector","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$list()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-capabilities-","dir":"Reference","previous_headings":"","what":"Method capabilities()","title":"Vault Tokens — vault_client_token","text":"Fetch capabilities token given paths. capabilities returned derived policies token, policies token entitled entity entity's group memberships.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$capabilities(path, token)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"path Vector paths capabilities queried token Single token capabilities queried","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-capabilities-self-","dir":"Reference","previous_headings":"","what":"Method capabilities_self()","title":"Vault Tokens — vault_client_token","text":"capabilities method, client token used make request.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$capabilities_self(path)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"path Vector paths capabilities queried","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-capabilities-accessor-","dir":"Reference","previous_headings":"","what":"Method capabilities_accessor()","title":"Vault Tokens — vault_client_token","text":"capabilities method, using token accessor rather token .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$capabilities_accessor(path, accessor)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"path Vector paths capabilities queried accessor Accessor token capabilities queried","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-client-","dir":"Reference","previous_headings":"","what":"Method client()","title":"Vault Tokens — vault_client_token","text":"","code":"Return the current client token"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$client()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-create-","dir":"Reference","previous_headings":"","what":"Method create()","title":"Vault Tokens — vault_client_token","text":"Create new token","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$create(   role_name = NULL,   id = NULL,   policies = NULL,   meta = NULL,   orphan = FALSE,   no_default_policy = FALSE,   max_ttl = NULL,   display_name = NULL,   num_uses = 0L,   period = NULL,   ttl = NULL,   wrap_ttl = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"role_name name token role id ID client token. Can specified root token. Otherwise, token ID randomly generated value policies character vector policies token. must subset policies belonging token making request, unless root. specified, defaults policies calling token. meta named list strings metadata pass audit devices. orphan Logical, indicating token created orphan (parent). , automatically revoked revocation token. no_default_policy Logical, TRUE, default policy contained token's policy set. max_ttl Provides maximum lifetime tokens issued role, including periodic tokens. Unlike direct token creation, value explicit max TTL stored token, roles check always use current value set role. main use provide hard upper bound periodic tokens, otherwise can live forever long renewed. integer number seconds display_name display name token num_uses Maximum number uses token can . can used create one-time-token limited use token. default, value 0, limit number uses. period specified, token periodic; maximum TTL (unless max_ttl also set) every renewal use given period. Requires root/sudo token use. ttl TTL period token, provided \"1h\", hour largest suffix. provided, token valid default lease TTL, indefinitely root policy used. wrap_ttl Indicates secret wrapped. discussed vault documentation: https://developer.hashicorp.com/vault/docs/concepts/response-wrapping option used, vault take response sent HTTP client instead insert cubbyhole single-use token, returning single-use token instead. Logically speaking, response wrapped token, retrieving requires unwrap operation token (see $unwrap method vault_client.  Must specified valid duration (e.g., 1h).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-lookup-","dir":"Reference","previous_headings":"","what":"Method lookup()","title":"Vault Tokens — vault_client_token","text":"Returns information client token","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$lookup(token = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"token token lookup","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-lookup-self-","dir":"Reference","previous_headings":"","what":"Method lookup_self()","title":"Vault Tokens — vault_client_token","text":"Returns information current client token (calling $lookup token client using.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$lookup_self()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-lookup-accessor-","dir":"Reference","previous_headings":"","what":"Method lookup_accessor()","title":"Vault Tokens — vault_client_token","text":"Returns information client token accessor.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-9","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$lookup_accessor(accessor)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"accessor token accessor lookup","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-renew-","dir":"Reference","previous_headings":"","what":"Method renew()","title":"Vault Tokens — vault_client_token","text":"Renews lease associated token. used prevent expiration token, automatic revocation . Token renewal possible lease associated .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-10","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$renew(token, increment = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"token token renew increment optional requested lease increment can provided. increment may ignored.  given, duration (e.g., 1h).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-renew-self-","dir":"Reference","previous_headings":"","what":"Method renew_self()","title":"Vault Tokens — vault_client_token","text":"Renews lease associated calling token. used prevent expiration token, automatic revocation . Token renewal possible lease associated .  equivalent calling $renew() client token.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-11","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$renew_self(increment = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-8","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"increment optional requested lease increment can provided. increment may ignored.  given, duration (e.g., 1h).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-revoke-","dir":"Reference","previous_headings":"","what":"Method revoke()","title":"Vault Tokens — vault_client_token","text":"Revokes token child tokens. token revoked, dynamic secrets generated also revoked.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-12","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$revoke(token)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-9","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"token token revoke","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-revoke-self-","dir":"Reference","previous_headings":"","what":"Method revoke_self()","title":"Vault Tokens — vault_client_token","text":"Revokes token used call child tokens. token revoked, dynamic secrets generated also revoked.  equivalent calling $revoke() client token.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-13","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$revoke_self()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-revoke-accessor-","dir":"Reference","previous_headings":"","what":"Method revoke_accessor()","title":"Vault Tokens — vault_client_token","text":"Revoke token associated accessor child tokens. meant purposes access token ID need revoke token children.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-14","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$revoke_accessor(accessor)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-10","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"accessor Accessor token revoke.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-revoke-and-orphan-","dir":"Reference","previous_headings":"","what":"Method revoke_and_orphan()","title":"Vault Tokens — vault_client_token","text":"Revokes token child tokens. token revoked, secrets generated also revoked. child tokens orphaned, can revoked subsequently using /auth/token/revoke/. root-protected method.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-15","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$revoke_and_orphan(token)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-11","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"token token revoke","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-role-read-","dir":"Reference","previous_headings":"","what":"Method role_read()","title":"Vault Tokens — vault_client_token","text":"Fetches named role configuration.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-16","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$role_read(role_name)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-12","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"role_name name token role.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-role-list-","dir":"Reference","previous_headings":"","what":"Method role_list()","title":"Vault Tokens — vault_client_token","text":"List available token roles.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-17","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$role_list()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-role-write-","dir":"Reference","previous_headings":"","what":"Method role_write()","title":"Vault Tokens — vault_client_token","text":"Creates (replaces) named role. Roles enforce specific behaviour creating tokens allow token functionality otherwise available require sudo/root privileges access. Role parameters, set, override provided options create endpoints. role name also included token path, allowing tokens created role revoked using /sys/leases/revoke-prefix endpoint.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-18","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$role_write(   role_name,   allowed_policies = NULL,   disallowed_policies = NULL,   orphan = NULL,   period = NULL,   renewable = NULL,   explicit_max_ttl = NULL,   path_suffix = NULL,   bound_cidrs = NULL,   token_type = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-13","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"role_name Name role - used later refer role (e.g., $create $role_* methods. allowed_policies Character vector policies allowed role.  set, tokens can created subset policies list, rather normal semantics tokens subset calling token's policies. parameter comma-delimited string policy names. creation time no_default_policy set \"default\" contained disallowed_policies, \"default\" policy added created token automatically. disallowed_policies Character vector policies forbidden role.  set, successful token creation via role require policies given list requested. Adding \"default\" list prevent \"default\" added automatically created tokens. orphan TRUE, tokens created policy orphan tokens (parent). , automatically revoked revocation token. period duration (e.g., 1h).  specified, token periodic; maximum TTL (unless \"explicit-max-ttl\" also set) every renewal use given period. Requires root/sudo token use. renewable Set FALSE disable ability token renewed past initial TTL. default value TRUE allow token renewable system/mount maximum TTL. explicit_max_ttl integer number seconds.  Provides maximum lifetime tokens issued role, including periodic tokens. Unlike direct token creation, value explicit max TTL stored token, roles check always use current value set role. main use provide hard upper bound periodic tokens, otherwise can live forever long renewed. integer number seconds. path_suffix string.  set, tokens created role given suffix part path addition role name. can useful certain scenarios, keeping role name future revoking tokens created point time. suffix can changed, allowing new callers new suffix part path, tokens old suffix can revoked via /sys/leases/revoke-prefix. bound_cidrs Character vector CIDRS.  set, restricts usage generated token client IPs falling within range specified CIDR(s). Unlike role parameters, reevaluated current role value usage; set token . Root tokens TTL bound CIDRs; root tokens TTLs bound CIDRs. token_type Specifies type tokens returned role. either service batch specified, kind token always returned. default-service, service tokens returned unless client requests batch type token token creation time. default-batch, batch tokens returned unless client requests service type token token creation time.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-role-delete-","dir":"Reference","previous_headings":"","what":"Method role_delete()","title":"Vault Tokens — vault_client_token","text":"Delete named token role","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-19","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$role_delete(role_name)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-14","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"role_name name role delete","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-tidy-","dir":"Reference","previous_headings":"","what":"Method tidy()","title":"Vault Tokens — vault_client_token","text":"Performs maintenance tasks clean invalid entries may remain token store. Generally, running needed unless upgrade notes support personnel suggest . may perform lot /O storage method used sparingly.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-20","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$tidy()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"method-login-","dir":"Reference","previous_headings":"","what":"Method login()","title":"Vault Tokens — vault_client_token","text":"Unlike auth backend login methods, actually log vault.  Instead verifies token can used communicate vault.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"usage-21","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tokens — vault_client_token","text":"","code":"vault_client_token$login(token = NULL, quiet = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"arguments-15","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tokens — vault_client_token","text":"token token test quiet Logical scalar, set TRUE suppress informational messages.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_token.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Vault Tokens — vault_client_token","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   client <- server$client()    # There are lots of token methods here:   client$token    # To demonstrate, it will be useful to create a restricted   # policy that can only read from the /secret path   rules <- 'path \"secret/*\" {policy = \"read\"}'   client$policy$write(\"read-secret\", rules)   client$write(\"/secret/path\", list(key = \"value\"))    # Create a token that has this policy   token <- client$auth$token$create(policies = \"read-secret\")   alice <- vaultr::vault_client(addr = server$addr)   alice$login(method = \"token\", token = token)   alice$read(\"/secret/path\")    client$token$lookup(token)    # We can query the capabilities of this token   client$token$capabilities(\"secret/path\", token)    # Tokens are not safe to pass around freely because they *are*   # the ability to login, but the `token$create` command also   # provides an accessor:   accessor <- attr(token, \"info\")$accessor    # It is not possible to derive the token from the accessor, but   # we can use the accessor to ask vault what it could do if it   # did have the token (and do things like revoke the token)   client$token$capabilities_accessor(\"secret/path\", accessor)    client$token$revoke_accessor(accessor)   try(client$token$capabilities_accessor(\"secret/path\", accessor))    # cleanup   server$kill() } #> Verifying token #> Error : 1 error occurred: #> \t* invalid accessor #>  #>"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":null,"dir":"Reference","previous_headings":"","what":"Vault Tools — vault_client_tools","title":"Vault Tools — vault_client_tools","text":"Vault Tools Vault Tools","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Vault Tools — vault_client_tools","text":"Interact vault's cryptographic tools.  provides support high-quality random numbers cryptographic hashes.  functionality also available transit secret engine.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Vault Tools — vault_client_tools","text":"vaultr::vault_client_object -> vault_client_tools","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Vault Tools — vault_client_tools","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Vault Tools — vault_client_tools","text":"vault_client_tools$new() vault_client_tools$random() vault_client_tools$hash()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Vault Tools — vault_client_tools","text":"Create vault_client_tools object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tools — vault_client_tools","text":"","code":"vault_client_tools$new(api_client)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tools — vault_client_tools","text":"api_client vault_api_client object","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"method-random-","dir":"Reference","previous_headings":"","what":"Method random()","title":"Vault Tools — vault_client_tools","text":"Generates high-quality random bytes specified length.  totally independent R's random number stream provides random numbers suitable cryptographic purposes.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tools — vault_client_tools","text":"","code":"vault_client_tools$random(bytes = 32, format = \"hex\")"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tools — vault_client_tools","text":"bytes Number bytes generate (integer) format output format produce; must one hex (single hex string d1189e2f83b72ab6), base64 (single base64 encoded string 8TDJekY0mYs=) raw (raw vector length bytes).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"method-hash-","dir":"Reference","previous_headings":"","what":"Method hash()","title":"Vault Tools — vault_client_tools","text":"Generates cryptographic hash given data using specified algorithm.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Vault Tools — vault_client_tools","text":"","code":"vault_client_tools$hash(data, algorithm = NULL, format = \"hex\")"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vault Tools — vault_client_tools","text":"data raw vector data hash.  generate raw vector R object, one option use unserialize(x, NULL) aware version information may included. Alternatively, string, one might use charToRaw. algorithm string indicating hash algorithm use. exact set supported algorithms may depend vault server version, version 1.0.0 vault supports sha2-224, sha2-256, sha2-384 sha2-512.  default sha2-256. format format output - must one hex base64.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_tools.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Vault Tools — vault_client_tools","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   client <- server$client()    # Random bytes in hex   client$tools$random()   # base64   client$tools$random(format = \"base64\")   # raw   client$tools$random(10, format = \"raw\")    # Hash data:   data <- charToRaw(\"hello vault\")   # will produce 55e702...92efd40c2a4   client$tools$hash(data)    # sha2-512 hash:   client$tools$hash(data, \"sha2-512\")    # cleanup   server$kill() }"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":null,"dir":"Reference","previous_headings":"","what":"Transit Engine — vault_client_transit","title":"Transit Engine — vault_client_transit","text":"Transit Engine Transit Engine","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Transit Engine — vault_client_transit","text":"Interact vault's transit engine.  useful encrypting arbitrary data without storing vault - like \"cryptography service\" \"encryption service\". transit secrets engine can also sign verify data; generate hashes HMACs data; act source random bytes. See https://developer.hashicorp.com/vault/docs/secrets/transit introduction capabilities transit engine.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Transit Engine — vault_client_transit","text":"vaultr::vault_client_object -> vault_client_transit","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Transit Engine — vault_client_transit","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Transit Engine — vault_client_transit","text":"vault_client_transit$new() vault_client_transit$custom_mount() vault_client_transit$key_create() vault_client_transit$key_read() vault_client_transit$key_list() vault_client_transit$key_delete() vault_client_transit$key_update() vault_client_transit$key_rotate() vault_client_transit$key_export() vault_client_transit$data_encrypt() vault_client_transit$data_decrypt() vault_client_transit$data_rewrap() vault_client_transit$datakey_create() vault_client_transit$random() vault_client_transit$hash() vault_client_transit$hmac() vault_client_transit$sign() vault_client_transit$verify_signature() vault_client_transit$verify_hmac() vault_client_transit$key_backup() vault_client_transit$key_restore() vault_client_transit$key_trim()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Transit Engine — vault_client_transit","text":"Create vault_client_transit object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$new(api_client, mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"api_client vault_api_client object mount Mount point backend","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-custom-mount-","dir":"Reference","previous_headings":"","what":"Method custom_mount()","title":"Transit Engine — vault_client_transit","text":"Set vault_client_transit object custom mount.  example, suppose mounted transit secret backend /transit2 might use tr <- vault$secrets$transit$custom_mount(\"/transit2\") - pattern repeated secret authentication backends.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$custom_mount(mount)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"mount String, indicating path engine mounted .","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-key-create-","dir":"Reference","previous_headings":"","what":"Method key_create()","title":"Transit Engine — vault_client_transit","text":"Create new named encryption key specified type. values set changed key creation.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$key_create(   name,   key_type = NULL,   convergent_encryption = NULL,   derived = NULL,   exportable = NULL,   allow_plaintext_backup = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name Name key.  used future interactions key - key returned. key_type Specifies type key create.  default aes256-gcm96. currently-supported types : aes256-gcm96: AES-256 wrapped GCM using 96-bit nonce size AEAD (symmetric, supports derivation convergent encryption) chacha20-poly1305: ChaCha20-Poly1305 AEAD (symmetric, supports derivation convergent encryption) ed25519: ED25519 (asymmetric, supports derivation). using derivation, sign operation context derive key signature; signing analogue convergent_encryption ecdsa-p256: ECDSA using P-256 elliptic curve (asymmetric) rsa-2048: RSA bit size 2048 (asymmetric) rsa-4096: RSA bit size 4096 (asymmetric) convergent_encryption Logical default FALSE. TRUE, key support convergent encryption, plaintext creates ciphertext. requires derived set true. enabled, encryption(/decryption/rewrap/datakey) operation derive nonce value rather randomly generate . derived Specifies key derivation used. enabled, encrypt/decrypt requests named key must provide context used key derivation (default FALSE). exportable Enables keys exportable. allows valid keys key ring exported. set, disabled (default FALSE). allow_plaintext_backup set, enables taking backup named key plaintext format. set, disabled (default FALSE).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-key-read-","dir":"Reference","previous_headings":"","what":"Method key_read()","title":"Transit Engine — vault_client_transit","text":"Read information previously generated key. returned object shows creation time key version; values keys . Depending type key, different information may returned, e.g. asymmetric key return public key standard format type.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$key_read(name)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name name key read","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-key-list-","dir":"Reference","previous_headings":"","what":"Method key_list()","title":"Transit Engine — vault_client_transit","text":"List names keys","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$key_list()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-key-delete-","dir":"Reference","previous_headings":"","what":"Method key_delete()","title":"Transit Engine — vault_client_transit","text":"Delete key name.  longer possible decrypt data encrypted named key. potentially catastrophic operation, deletion_allowed tunable must set using $key_update().","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$key_delete(name)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name name key delete.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-key-update-","dir":"Reference","previous_headings":"","what":"Method key_update()","title":"Transit Engine — vault_client_transit","text":"method allows tuning configuration values given key. (values returned read operation named key.)","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$key_update(   name,   min_decryption_version = NULL,   min_encryption_version = NULL,   deletion_allowed = NULL,   exportable = NULL,   allow_plaintext_backup = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name name key update min_decryption_version Specifies minimum version ciphertext allowed decrypted, integer (default 0). Adjusting part key rotation policy can prevent old copies ciphertext decrypted, fall wrong hands. signatures, value controls minimum version signature can verified . HMACs, controls minimum version key allowed used key verification. min_encryption_version Specifies minimum version key can used encrypt plaintext, sign payloads, generate HMACs, integer (default 0).  Must 0 (use latest version) value greater equal min_decryption_version. deletion_allowed Specifies key allowed deleted, logical (default FALSE). exportable Enables keys exportable. allows valid keys key ring exported. set, disabled. allow_plaintext_backup set, enables taking backup named key plaintext format. set, disabled.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-key-rotate-","dir":"Reference","previous_headings":"","what":"Method key_rotate()","title":"Transit Engine — vault_client_transit","text":"Rotates version named key. rotation, new plaintext requests encrypted new version key. upgrade ciphertext encrypted latest version key, use rewrap endpoint. supported keys support encryption decryption operations.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$key_rotate(name)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name name key rotate","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-key-export-","dir":"Reference","previous_headings":"","what":"Method key_export()","title":"Transit Engine — vault_client_transit","text":"Export named key. version specified, specific version returned. latest provided version, current key provided. Depending type key, different information may returned. key must exportable support operation version must still valid. details see https://github.com/hashicorp/vault/issues/2667 HashiCorp says \"Part \"contract\" transit key never exposed outside Vault. added ability export keys enterprises key escrow requirements, leaves permanent mark key metadata. suppose point allow importing key also leave mark.\"","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$key_export(name, key_type, version = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name Name key export key_type Specifies type key export. Valid values encryption-key, signing-key hmac-key. version Specifies version key read. omitted, versions key returned. version set latest, current key returned","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-data-encrypt-","dir":"Reference","previous_headings":"","what":"Method data_encrypt()","title":"Transit Engine — vault_client_transit","text":"endpoint encrypts provided plaintext using named key.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-9","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$data_encrypt(   key_name,   data,   key_version = NULL,   context = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-8","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"key_name Specifies name encryption key encrypt . data Data encrypt, raw vector key_version Key version use, integer. set, uses latest version. Must greater equal key's min_encryption_version, set. context Specifies context key derivation. required key derivation enabled key.  Must raw vector.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-data-decrypt-","dir":"Reference","previous_headings":"","what":"Method data_decrypt()","title":"Transit Engine — vault_client_transit","text":"Decrypts provided ciphertext using named key.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-10","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$data_decrypt(key_name, data, context = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-9","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"key_name Specifies name encryption key decrypt . data data decrypt.  Must string, returned $data_encrypt. context Specifies context key derivation. required key derivation enabled key.  Must raw vector.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-data-rewrap-","dir":"Reference","previous_headings":"","what":"Method data_rewrap()","title":"Transit Engine — vault_client_transit","text":"Rewraps provided ciphertext using latest version named key. never returns plaintext, possible delegate functionality untrusted users scripts.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-11","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$data_rewrap(   key_name,   data,   key_version = NULL,   context = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-10","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"key_name Specifies name encryption key re-encrypt data data decrypt.  Must string, returned $data_encrypt. key_version Specifies version key use operation. set, uses latest version. Must greater equal key's min_encryption_version, set. context Specifies context key derivation. required key derivation enabled key.  Must raw vector.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-datakey-create-","dir":"Reference","previous_headings":"","what":"Method datakey_create()","title":"Transit Engine — vault_client_transit","text":"endpoint generates new high-entropy key value encrypted named key. Optionally return plaintext key well.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-12","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$datakey_create(   name,   plaintext = FALSE,   bits = NULL,   context = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-11","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name Specifies name encryption key use encrypt datakey plaintext Logical, indicating plaintext key returned. bits Specifies number bits desired key. Can 128, 256, 512. context Specifies context key derivation. required key derivation enabled key.  Must raw vector.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-random-","dir":"Reference","previous_headings":"","what":"Method random()","title":"Transit Engine — vault_client_transit","text":"Generates high-quality random bytes specified length.  totally independent R's random number stream provides random numbers suitable cryptographic purposes.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-13","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$random(bytes = 32, format = \"hex\")"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-12","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"bytes Number bytes generate (integer) format output format produce; must one hex (single hex string d1189e2f83b72ab6), base64 (single base64 encoded string 8TDJekY0mYs=) raw (raw vector length bytes).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-hash-","dir":"Reference","previous_headings":"","what":"Method hash()","title":"Transit Engine — vault_client_transit","text":"Generates cryptographic hash given data using specified algorithm.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-14","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$hash(data, algorithm = NULL, format = \"hex\")"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-13","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"data raw vector data hash.  generate raw vector R object, one option use unserialize(x, NULL) aware version information may included. Alternatively, string, one might use charToRaw. algorithm string indicating hash algorithm use. exact set supported algorithms may depend vault server version, version 1.0.0 vault supports sha2-224, sha2-256, sha2-384 sha2-512.  default sha2-256. format format output - must one hex base64.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-hmac-","dir":"Reference","previous_headings":"","what":"Method hmac()","title":"Transit Engine — vault_client_transit","text":"endpoint returns digest given data using specified hash algorithm named key. key can type supported transit engine; raw key marshalled bytes used HMAC function. key type supports rotation, latest (current) version used.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-15","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$hmac(name, data, key_version = NULL, algorithm = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-14","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name Specifies name encryption key generate hmac data input data, raw vector key_version Specifies version key use operation. set, uses latest version. Must greater equal key's min_encryption_version, set. algorithm Specifies hash algorithm use. Currently-supported algorithms sha2-224, sha2-256, sha2-384 sha2-512.  default sha2-256.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-sign-","dir":"Reference","previous_headings":"","what":"Method sign()","title":"Transit Engine — vault_client_transit","text":"Returns cryptographic signature given data using named key specified hash algorithm. key must type supports signing.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-16","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$sign(   name,   data,   key_version = NULL,   hash_algorithm = NULL,   prehashed = FALSE,   signature_algorithm = NULL,   context = NULL )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-15","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name Specifies name encryption key use signing data input data, raw vector key_version Specifies version key use signing. set, uses latest version. Must greater equal key's min_encryption_version, set. hash_algorithm Specifies hash algorithm use. Currently-supported algorithms sha2-224, sha2-256, sha2-384 sha2-512.  default sha2-256. prehashed Set true input already hashed. key type rsa-2048 rsa-4096, algorithm used hash input indicated hash_algorithm parameter. signature_algorithm using RSA key, specifies RSA signature algorithm use signing. Supported signature types pss (default) pkcs1v15. context Specifies context key derivation. required key derivation enabled key.  Must raw vector.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-verify-signature-","dir":"Reference","previous_headings":"","what":"Method verify_signature()","title":"Transit Engine — vault_client_transit","text":"Determine whether provided signature valid given data.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-17","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$verify_signature(   name,   data,   signature,   hash_algorithm = NULL,   signature_algorithm = NULL,   context = NULL,   prehashed = FALSE )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-16","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name Name key data Data verify, raw vector signature signed data, string. hash_algorithm Specifies hash algorithm use. can also specified part URL (see $sign $hmac details). signature_algorithm using RSA key, specifies RSA signature algorithm use signature verification context Specifies context key derivation. required key derivation enabled key.  Must raw vector. prehashed Set TRUE input already hashed","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-verify-hmac-","dir":"Reference","previous_headings":"","what":"Method verify_hmac()","title":"Transit Engine — vault_client_transit","text":"Determine whether provided signature valid given data.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-18","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$verify_hmac(   name,   data,   signature,   hash_algorithm = NULL,   signature_algorithm = NULL,   context = NULL,   prehashed = FALSE )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-17","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name Name key data Data verify, raw vector signature signed data, string. hash_algorithm Specifies hash algorithm use. can also specified part URL (see $sign $hmac details). signature_algorithm using RSA key, specifies RSA signature algorithm use signature verification context Specifies context key derivation. required key derivation enabled key.  Must raw vector. prehashed Set TRUE input already hashed","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-key-backup-","dir":"Reference","previous_headings":"","what":"Method key_backup()","title":"Transit Engine — vault_client_transit","text":"Returns plaintext backup named key. backup contains configuration data keys versions along HMAC key. response endpoint can used $key_restore restore key.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-19","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$key_backup(name)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-18","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name Name key backup","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-key-restore-","dir":"Reference","previous_headings":"","what":"Method key_restore()","title":"Transit Engine — vault_client_transit","text":"Restores backup named key. restore key configurations versions named key along HMAC keys. input method output $key_restore method.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-20","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$key_restore(name, backup, force = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-19","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name Name restored key. backup Backed key data restored. output $key_backup endpoint. force Logical.  TRUE, force restore proceed even key name already exists.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"method-key-trim-","dir":"Reference","previous_headings":"","what":"Method key_trim()","title":"Transit Engine — vault_client_transit","text":"endpoint trims older key versions setting minimum version keyring. trimmed, previous versions key recovered.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"usage-21","dir":"Reference","previous_headings":"","what":"Usage","title":"Transit Engine — vault_client_transit","text":"","code":"vault_client_transit$key_trim(name, min_version)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"arguments-20","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transit Engine — vault_client_transit","text":"name Key trim min_version minimum version key ring. versions version permanently deleted. value can equal lesser min_decryption_version min_encryption_version. allowed set either min_encryption_version min_decryption_version set zero.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_client_transit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Transit Engine — vault_client_transit","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start if (!is.null(server)) {   client <- server$client()    client$secrets$enable(\"transit\")   transit <- client$secrets$transit    # Before encrypting anything, create a key.  Note that it will   # not be returned to you, and is accessed purely by name   transit$key_create(\"test\")    # Some text to encrypt   plaintext <- \"hello world\"    # Encrypted:   cyphertext <- transit$data_encrypt(\"test\", charToRaw(plaintext))    # Decrypt the data   res <- transit$data_decrypt(\"test\", cyphertext)   rawToChar(res)    # This approach works with R objects too, if used with serialise.   # First, serialise an R object to a raw vector:   data <- serialize(mtcars, NULL)    # Then encrypt this data:   enc <- transit$data_encrypt(\"test\", data)    # The resulting string can be safely passed around (e.g., over   # email) or written to disk, and can later be decrypted by   # anyone who has access to the \"test\" key in the vault:   data2 <- transit$data_decrypt(\"test\", enc)    # Once decrypted, the data can be \"unserialised\" back into an R   # object:   unserialize(data2)    # cleanup   server$kill() }"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_resolve_secrets.html","id":null,"dir":"Reference","previous_headings":"","what":"Resolve secrets from R objects — vault_resolve_secrets","title":"Resolve secrets from R objects — vault_resolve_secrets","text":"Use vault resolve secrets.  convenience function wraps pattern used applications vault. idea allow replacement data configuration special strings indicate string refers vault secret.  function resolves secrets.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_resolve_secrets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Resolve secrets from R objects — vault_resolve_secrets","text":"","code":"vault_resolve_secrets(x, ..., login = TRUE, vault_args = NULL)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_resolve_secrets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Resolve secrets from R objects — vault_resolve_secrets","text":"x List values, may refer vault secrets (see Details pattern).  values strings match pattern secret left -. ... Args passed vault_client call. login Login method passed call vault_client. vault_args alternative using login ..., list (named) arguments can provided , equivalent full set arguments might pass vault_client.  provided, login ignored additional arguments provided ... error thrown.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_resolve_secrets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Resolve secrets from R objects — vault_resolve_secrets","text":"List properties vault secrets resolved.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_resolve_secrets.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Resolve secrets from R objects — vault_resolve_secrets","text":"element data, string matches form:   treated vault secret resolved.  <path get> something like /secret/path/password <field> name field key/value data stored path.  example, suppose data list(username = \"alice\", password = \"s3cret!\") stored /secret/database/user, string   refer value s3cret!","code":"VAULT:<path to secret>:<field> VAULT:/secret/database/user:password"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_resolve_secrets.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Resolve secrets from R objects — vault_resolve_secrets","text":"","code":"server <- vaultr::vault_test_server(if_disabled = message) #> ...waiting for Vault to start  if (!is.null(server)) {   client <- server$client()   # The example from above:   client$write(\"/secret/database/user\",                list(username = \"alice\", password = \"s3cret!\"))    # A list of data that contains a mix of secrets to be resolved   # and other data:   x <- list(user = \"alice\",             password = \"VAULT:/secret/database/user:password\",             port = 5678)    # Explicitly pass in the login details and resolve the secrets:   vaultr::vault_resolve_secrets(x, login = \"token\", token = server$token,                                 addr = server$addr)    # Alternatively, if appropriate environment variables are set   # then this can be done more easily:   if (requireNamespace(\"withr\", quietly = TRUE)) {     env <- c(VAULTR_AUTH_METHOD = \"token\",              VAULT_TOKEN = server$token,              VAULT_ADDR = server$addr)     withr::with_envvar(env, vault_resolve_secrets(x))   } } #> Verifying token #> Verifying token #> $user #> [1] \"alice\" #>  #> $password #> [1] \"s3cret!\" #>  #> $port #> [1] 5678 #>"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":null,"dir":"Reference","previous_headings":"","what":"Control a test vault server — vault_test_server","title":"Control a test vault server — vault_test_server","text":"Control server use testing.  designed used packages wish run tests vault server.  need set VAULTR_TEST_SERVER_BIN_PATH point directory containing vault binary, binary , value auto try find PATH.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Control a test vault server — vault_test_server","text":"","code":"vault_test_server(   https = FALSE,   init = TRUE,   if_disabled = testthat::skip,   quiet = FALSE )"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Control a test vault server — vault_test_server","text":"https Logical scalar, indicating https-using server created, rather default vault dev-mode server.  still entirely insecure, uses self signed certificates bundled package. init Logical scalar, indicating https-using server initialised. if_disabled Callback function run vault server enabled.  default, designed used within tests, testthat::skip.  Alternatively, inspect $enabled property returned object. quiet Logical, indicating startup quiet print messages","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Control a test vault server — vault_test_server","text":"created vault_test_server, server stay alive long R process alive vault_server_instance object goes scope garbage collected.  Calling $kill() explicitly stop server, strictly needed.  See methods control server instance.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"warning","dir":"Reference","previous_headings":"","what":"Warning","title":"Control a test vault server — vault_test_server","text":"Starting server test mode must used production circumstances.  name suggests, vault_test_server server suitable tests lacks features required make vault secure.  information, please see official Vault documentation development servers: https://developer.hashicorp.com/vault/docs/concepts/dev-server","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"super-class","dir":"Reference","previous_headings":"","what":"Super class","title":"Control a test vault server — vault_test_server","text":"vaultr::vault_client_object -> vault_server_instance","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"Control a test vault server — vault_test_server","text":"port vault port (read-). addr vault address; suitable using vault_client (read-). token vault root token, testing vault server created.  vault rekeyed longer accurate (read-). keys Key shares vault initialised (read-). cacert Path https certificate, running https mode (read-).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Control a test vault server — vault_test_server","text":"vaultr::vault_client_object$format() vaultr::vault_client_object$help()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Control a test vault server — vault_test_server","text":"vault_server_instance$new() vault_server_instance$version() vault_server_instance$client() vault_server_instance$env() vault_server_instance$export() vault_server_instance$clear_cached_token() vault_server_instance$kill()","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Control a test vault server — vault_test_server","text":"Create vault_server_instance object. typically called users.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Control a test vault server — vault_test_server","text":"","code":"vault_server_instance$new(bin, port, https, init, quiet = FALSE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Control a test vault server — vault_test_server","text":"bin Path vault binary port Port use https Logical, indicating use TLS/https init Logical, indicating initialise quiet Logical, indicating startup quiet","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"method-version-","dir":"Reference","previous_headings":"","what":"Method version()","title":"Control a test vault server — vault_test_server","text":"Return server version, numeric_version object.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Control a test vault server — vault_test_server","text":"","code":"vault_server_instance$version()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"method-client-","dir":"Reference","previous_headings":"","what":"Method client()","title":"Control a test vault server — vault_test_server","text":"Create new client can use server.  client vault_client object.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Control a test vault server — vault_test_server","text":"","code":"vault_server_instance$client(login = TRUE, quiet = TRUE)"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Control a test vault server — vault_test_server","text":"login Logical, indicating client login server (default TRUE). quiet Logical, indicating informational messages suppressed.  Default TRUE, contrast methods.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"method-env-","dir":"Reference","previous_headings":"","what":"Method env()","title":"Control a test vault server — vault_test_server","text":"Return named character vector environment variables can used communicate vault server (VAULT_ADDR, VAULT_TOKEN, etc).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Control a test vault server — vault_test_server","text":"","code":"vault_server_instance$env()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"method-export-","dir":"Reference","previous_headings":"","what":"Method export()","title":"Control a test vault server — vault_test_server","text":"Export variables returned $env() method environment.  makes available child processes.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"Control a test vault server — vault_test_server","text":"","code":"vault_server_instance$export()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"method-clear-cached-token-","dir":"Reference","previous_headings":"","what":"Method clear_cached_token()","title":"Control a test vault server — vault_test_server","text":"Clear session-cached token server. intended testing new authentication backends.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"Control a test vault server — vault_test_server","text":"","code":"vault_server_instance$clear_cached_token()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"method-kill-","dir":"Reference","previous_headings":"","what":"Method kill()","title":"Control a test vault server — vault_test_server","text":"Kill server.","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"Control a test vault server — vault_test_server","text":"","code":"vault_server_instance$kill()"},{"path":"https://vaccineimpact.org/vaultr/reference/vault_test_server.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Control a test vault server — vault_test_server","text":"","code":"# Try and start a server; if one is not enabled (see details # above) then this will return NULL server <- vault_test_server(if_disabled = message) #> ...waiting for Vault to start  if (!is.null(server)) {   # We now have a server running on an arbitrary high port - note   # that we are running over http and in dev mode: this is not at   # all suitable for production use, just for tests   server$addr    # Create clients using the client method - by default these are   # automatically authenticated against the server   client <- server$client()   client$write(\"/secret/password\", list(value = \"s3cret!\"))   client$read(\"/secret/password\")    # The server stops automatically when the server object is   # garbage collected, or it can be turned off with the   # 'kill' method:   server$kill()   tryCatch(client$status(), error = function(e) message(e$message)) } #> Failed to connect to 127.0.0.1 port 18218 after 0 ms: Connection refused"},{"path":"https://vaccineimpact.org/vaultr/reference/vaultr-package.html","id":null,"dir":"Reference","previous_headings":"","what":"Vault Client for Secrets and Sensitive Data — vaultr-package","title":"Vault Client for Secrets and Sensitive Data — vaultr-package","text":"Vault client secrets sensitive data; package provides wrappers HashiCorp's vault server. package wraps high-level API, includes support authentication via number backends (tokens, username password, github, \"AppRole\"), well number secrets engines (two key-value stores, vault's cubbyhole transit backend encryption---service).","code":""},{"path":"https://vaccineimpact.org/vaultr/reference/vaultr-package.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Vault Client for Secrets and Sensitive Data — vaultr-package","text":"get started, might want start \"vaultr\" vignette, available package vignette(\"vaultr\"). basic design package entrypoints - uses one interact almost entirely vault_client function.  function returns R6 object several methods (functions) also several objects contain methods objects, creating nested tree functionality. object, online help available via help method, example   testing packages rely vault, support creating temporary vault servers; see vaultr::vault_test_server \"packages\" vignette.","code":"client <- vaultr::vault_client() client$secrets$transit$help()"},{"path":[]},{"path":"https://vaccineimpact.org/vaultr/reference/vaultr-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Vault Client for Secrets and Sensitive Data — vaultr-package","text":"Maintainer: Rich FitzJohn rich.fitzjohn@gmail.com Authors: Robert Ashton Wes Hinsley contributors: Imperial College Science, Technology Medicine [copyright holder]","code":""}]
