<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Vault Low-Level Client
Vault Low-Level Client"><title>Vault Low-Level Client — vault_api_client • vaultr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Vault Low-Level Client — vault_api_client"><meta property="og:description" content="Vault Low-Level Client
Vault Low-Level Client"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">vaultr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/vaultr.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/packages.html">Using vaultr in packages</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/vimc/vaultr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Vault Low-Level Client</h1>
      <small class="dont-index">Source: <a href="https://github.com/vimc/vaultr/blob/HEAD/R/vault_api_client.R" class="external-link"><code>R/vault_api_client.R</code></a></small>
      <div class="d-none name"><code>vault_api_client.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Vault Low-Level Client</p>
<p>Vault Low-Level Client</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Low-level API client.  This can be used to directly communicate
with the vault server.  This object will primarily be useful for
debugging, testing or developing new vault methods, but is
nonetheless described here.</p>
    </div>
    <div class="section level2">
    <h2 id="super-class">Super class<a class="anchor" aria-label="anchor" href="#super-class"></a></h2>
    <p><code><a href="vault_client_object.html">vaultr::vault_client_object</a></code> -&gt; <code>vault_api_client</code></p>
    </div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>addr</code></dt>
<dd><p>The vault address (with protocol, hostname and port)</p></dd>


<dt><code>base_url</code></dt>
<dd><p>The base url (with protocol, hostname, port and
api version path)</p></dd>


<dt><code>tls_config</code></dt>
<dd><p>Information used in TLS config, if used</p></dd>


<dt><code>namespace</code></dt>
<dd><p>The vault namespace, if used</p></dd>


<dt><code>token</code></dt>
<dd><p>The vault token, if authenticated</p></dd>


<dt><code>version</code></dt>
<dd><p>The vault server version, once queried</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-vault_api_client-new"><code>vault_api_client$new()</code></a></p></li>
<li><p><a href="#method-vault_api_client-request"><code>vault_api_client$request()</code></a></p></li>
<li><p><a href="#method-vault_api_client-is_authenticated"><code>vault_api_client$is_authenticated()</code></a></p></li>
<li><p><a href="#method-vault_api_client-set_token"><code>vault_api_client$set_token()</code></a></p></li>
<li><p><a href="#method-vault_api_client-verify_token"><code>vault_api_client$verify_token()</code></a></p></li>
<li><p><a href="#method-vault_api_client-server_version"><code>vault_api_client$server_version()</code></a></p></li>
<li><p><a href="#method-vault_api_client-GET"><code>vault_api_client$GET()</code></a></p></li>
<li><p><a href="#method-vault_api_client-LIST"><code>vault_api_client$LIST()</code></a></p></li>
<li><p><a href="#method-vault_api_client-POST"><code>vault_api_client$POST()</code></a></p></li>
<li><p><a href="#method-vault_api_client-PUT"><code>vault_api_client$PUT()</code></a></p></li>
<li><p><a href="#method-vault_api_client-DELETE"><code>vault_api_client$DELETE()</code></a></p></li>
</ul></div><p><details open><summary>Inherited methods</summary><ul><li><span class="pkg-link" data-pkg="vaultr" data-topic="vault_client_object" data-id="format"><a href="vault_client_object.html#method-format"><code>vaultr::vault_client_object$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="vaultr" data-topic="vault_client_object" data-id="help"><a href="vault_client_object.html#method-help"><code>vaultr::vault_client_object$help()</code></a></span></li>
</ul></details></p><hr><a id="method-vault_api_client-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new api client</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/vault_api_client.html">vault_api_client</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>addr <span class="op">=</span> <span class="cn">NULL</span>, tls_config <span class="op">=</span> <span class="cn">NULL</span>, namespace <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>addr</code></dt>
<dd><p>Address of the vault server</p></dd>


<dt><code>tls_config</code></dt>
<dd><p>Optional TLS config</p></dd>


<dt><code>namespace</code></dt>
<dd><p>Optional namespace</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_api_client-request"></a><div class="section">
<h3 id="method-request-">Method <code>request()</code><a class="anchor" aria-label="anchor" href="#method-request-"></a></h3>
<p>Make a request to the api. Typically you should use
one of the higher-level wrappers, such as <code>$GET</code> or <code>$POST</code>.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_api_client</span><span class="op">$</span><span class="fu">request</span><span class="op">(</span><span class="va">verb</span>, <span class="va">path</span>, <span class="va">...</span>, token <span class="op">=</span> <span class="va">self</span><span class="op">$</span><span class="va">token</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>verb</code></dt>
<dd><p>The HTTP verb to use, as a <code>httr</code> function (e.g.,
pass <code><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">httr::GET</a></code> for a <code>GET</code> request).</p></dd>


<dt><code>path</code></dt>
<dd><p>The request path</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional arguments passed to the <code>httr</code> function</p></dd>


<dt><code>token</code></dt>
<dd><p>Optional token, overriding the client token</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_api_client-is_authenticated"></a><div class="section">
<h3 id="method-is-authenticated-">Method <code>is_authenticated()</code><a class="anchor" aria-label="anchor" href="#method-is-authenticated-"></a></h3>
<p>Test if the vault client currently holds a vault token.
This method does not verify the token - only test that is present.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_api_client</span><span class="op">$</span><span class="fu">is_authenticated</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-vault_api_client-set_token"></a><div class="section">
<h3 id="method-set-token-">Method <code>set_token()</code><a class="anchor" aria-label="anchor" href="#method-set-token-"></a></h3>
<p>Set a token within the client</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_api_client</span><span class="op">$</span><span class="fu">set_token</span><span class="op">(</span><span class="va">token</span>, verify <span class="op">=</span> <span class="cn">FALSE</span>, quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>token</code></dt>
<dd><p>String, with the new vault client token</p></dd>


<dt><code>verify</code></dt>
<dd><p>Logical, indicating if we should test that the token
is valid. If <code>TRUE</code>, then we use <code>$verify_token()</code> to test the
token before setting it and if it is not valid an error will be
thrown and the token not set.</p></dd>


<dt><code>quiet</code></dt>
<dd><p>Logical, if <code>TRUE</code>, then informational messages will be
suppressed.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_api_client-verify_token"></a><div class="section">
<h3 id="method-verify-token-">Method <code>verify_token()</code><a class="anchor" aria-label="anchor" href="#method-verify-token-"></a></h3>
<p>Test that a token is valid with the vault.
This will call vault's <code>/sys/capabilities-self</code> endpoint with the
token provided and check the <code>/sys</code> path.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_api_client</span><span class="op">$</span><span class="fu">verify_token</span><span class="op">(</span><span class="va">token</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>token</code></dt>
<dd><p>String, with the vault client token to test</p></dd>


<dt><code>quiet</code></dt>
<dd><p>Logical, if <code>TRUE</code>, then informational messages will be
suppressed</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_api_client-server_version"></a><div class="section">
<h3 id="method-server-version-">Method <code>server_version()</code><a class="anchor" aria-label="anchor" href="#method-server-version-"></a></h3>
<p>Retrieve the vault server version.  This is by default
cached within the client for a session.  Will return an R
<a href="https://rdrr.io/r/base/numeric_version.html" class="external-link">numeric_version</a> object.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_api_client</span><span class="op">$</span><span class="fu">server_version</span><span class="op">(</span>refresh <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>refresh</code></dt>
<dd><p>Logical, indicating if the server version information
should be refreshed even if known.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_api_client-GET"></a><div class="section">
<h3 id="method-get-">Method <code>GET()</code><a class="anchor" aria-label="anchor" href="#method-get-"></a></h3>
<p>Send a <code>GET</code> request to the vault server</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_api_client</span><span class="op">$</span><span class="fu">GET</span><span class="op">(</span><span class="va">path</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>path</code></dt>
<dd><p>The server path to use.  This is the "interesting"
part of the path only, with the server base url and api version
information added.</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional <code>httr</code>-compatible options.  These will be named
parameters or <code>httr</code> "request" objects.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_api_client-LIST"></a><div class="section">
<h3 id="method-list-">Method <code>LIST()</code><a class="anchor" aria-label="anchor" href="#method-list-"></a></h3>
<p>Send a <code>LIST</code> request to the vault server</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_api_client</span><span class="op">$</span><span class="fu">LIST</span><span class="op">(</span><span class="va">path</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>path</code></dt>
<dd><p>The server path to use.  This is the "interesting"
part of the path only, with the server base url and api version
information added.</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional <code>httr</code>-compatible options.  These will be named
parameters or <code>httr</code> "request" objects.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_api_client-POST"></a><div class="section">
<h3 id="method-post-">Method <code>POST()</code><a class="anchor" aria-label="anchor" href="#method-post-"></a></h3>
<p>Send a <code>POST</code> request to the vault server</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_api_client</span><span class="op">$</span><span class="fu">POST</span><span class="op">(</span><span class="va">path</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>path</code></dt>
<dd><p>The server path to use.  This is the "interesting"
part of the path only, with the server base url and api version
information added.</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional <code>httr</code>-compatible options.  These will be named
parameters or <code>httr</code> "request" objects.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_api_client-PUT"></a><div class="section">
<h3 id="method-put-">Method <code>PUT()</code><a class="anchor" aria-label="anchor" href="#method-put-"></a></h3>
<p>Send a <code>PUT</code> request to the vault server</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_api_client</span><span class="op">$</span><span class="fu">PUT</span><span class="op">(</span><span class="va">path</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>path</code></dt>
<dd><p>The server path to use.  This is the "interesting"
part of the path only, with the server base url and api version
information added.</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional <code>httr</code>-compatible options.  These will be named
parameters or <code>httr</code> "request" objects.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_api_client-DELETE"></a><div class="section">
<h3 id="method-delete-">Method <code>DELETE()</code><a class="anchor" aria-label="anchor" href="#method-delete-"></a></h3>
<p>Send a <code>DELETE</code> request to the vault server</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_api_client</span><span class="op">$</span><span class="fu">DELETE</span><span class="op">(</span><span class="va">path</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>path</code></dt>
<dd><p>The server path to use.  This is the "interesting"
part of the path only, with the server base url and api version
information added.</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional <code>httr</code>-compatible options.  These will be named
parameters or <code>httr</code> "request" objects.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">server</span> <span class="op">&lt;-</span> <span class="fu">vaultr</span><span class="fu">::</span><span class="fu"><a href="vault_test_server.html">vault_test_server</a></span><span class="op">(</span>if_disabled <span class="op">=</span> <span class="va">message</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ...waiting for Vault to start</span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">server</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="co"># Ordinarily, we would use the "vault_client" object for</span></span></span>
<span class="r-in"><span>  <span class="co"># high-level access to the vault server</span></span></span>
<span class="r-in"><span>  <span class="va">client</span> <span class="op">&lt;-</span> <span class="va">server</span><span class="op">$</span><span class="fu">client</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">client</span><span class="op">$</span><span class="fu">status</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># The api() method returns the "api client" object:</span></span></span>
<span class="r-in"><span>  <span class="va">api</span> <span class="op">&lt;-</span> <span class="va">client</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">api</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># This allows running arbitrary HTTP requests against the server:</span></span></span>
<span class="r-in"><span>  <span class="va">api</span><span class="op">$</span><span class="fu">GET</span><span class="op">(</span><span class="st">"/sys/seal-status"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># this is how vaultr is internally implemented so anything can</span></span></span>
<span class="r-in"><span>  <span class="co"># be done here, for example following vault's API documentation</span></span></span>
<span class="r-in"><span>  <span class="co"># https://www.vaultproject.io/api/secret/kv/kv-v1.html#sample-request-2</span></span></span>
<span class="r-in"><span>  <span class="va">api</span><span class="op">$</span><span class="fu">POST</span><span class="op">(</span><span class="st">"/secret/mysecret"</span>, body <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>key <span class="op">=</span> <span class="st">"value"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">api</span><span class="op">$</span><span class="fu">GET</span><span class="op">(</span><span class="st">"/secret/mysecret"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">api</span><span class="op">$</span><span class="fu">DELETE</span><span class="op">(</span><span class="st">"/secret/mysecret"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># cleanup</span></span></span>
<span class="r-in"><span>  <span class="va">server</span><span class="op">$</span><span class="fu">kill</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Rich FitzJohn, Robert Ashton, Wes Hinsley.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

