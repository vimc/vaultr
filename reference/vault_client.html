<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Make a vault client.  This must be done before accessing the
vault.  The default values for arguments are controlled by
environment variables (see Details) and values provided as
arguments override these defaults."><title>Make a vault client — vault_client • vaultr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Make a vault client — vault_client"><meta property="og:description" content="Make a vault client.  This must be done before accessing the
vault.  The default values for arguments are controlled by
environment variables (see Details) and values provided as
arguments override these defaults."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">vaultr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/vaultr.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/packages.html">Using vaultr in packages</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/vimc/vaultr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Make a vault client</h1>
      <small class="dont-index">Source: <a href="https://github.com/vimc/vaultr/blob/HEAD/R/vault_client.R" class="external-link"><code>R/vault_client.R</code></a></small>
      <div class="d-none name"><code>vault_client.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Make a vault client.  This must be done before accessing the
vault.  The default values for arguments are controlled by
environment variables (see Details) and values provided as
arguments override these defaults.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vault_client</span><span class="op">(</span></span>
<span>  login <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  addr <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tls_config <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  namespace <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>login</dt>
<dd><p>Login method.  Specify a string to be passed along as
the <code>method</code> argument to <code>$login</code>.  The default
<code>FALSE</code> means not to login.  <code>TRUE</code> means to login
using a default method specified by the environment variable
<code>VAULTR_AUTH_METHOD</code> - if that variable is not set, an
error is thrown.  The value of <code>NULL</code> is the same as
<code>TRUE</code> but does not throw an error if
<code>VAULTR_AUTH_METHOD</code> is not set.  Supported methods are
<code>token</code>, <code>github</code>, <code>approle</code>, <code>ldap</code>, and <code>userpass</code>.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments passed along to the authentication
method indicated by <code>login</code>, if used.</p></dd>


<dt>addr</dt>
<dd><p>The vault address <em>including protocol and port</em>,
e.g., <code>https://vault.example.com:8200</code>.  If not given, the
default is the environment variable <code>VAULT_ADDR</code>, which is
the same as used by vault's command line client.</p></dd>


<dt>tls_config</dt>
<dd><p>TLS (https) configuration.  For most uses this
can be left blank.  However, if your vault server uses a
self-signed certificate you will need to provide this.  Defaults
to the environment variable <code>VAULT_CAPATH</code>, which is the
same as vault's command line client.</p></dd>


<dt>namespace</dt>
<dd><p>A vault namespace, when using enterprise
vault. If given, then this must be a string, and your vault must
support namespaces, which is an enterprise feature. If the
environment variable <code>VAULT_NAMESPACE</code> is set, we use that
namespace when <code>NULL</code> is provided as an argument (this is the
same variable as used by vault's command line client).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="environment-variables">Environment variables<a class="anchor" aria-label="anchor" href="#environment-variables"></a></h2>
    


<p>The creation of a client is affected by a number of environment
variables, following the main vault command line client.</p><ul><li><p><code>VAULT_ADDR</code>: The url of the vault server.  Must
include a protocol (most likely <code>https://</code> but in testing
<code>http://</code> might be used)</p></li>
<li><p><code>VAULT_CAPATH</code>: The path to CA certificates</p></li>
<li><p><code>VAULT_TOKEN</code>: A vault token to use in authentication.
Only used for token-based authentication</p></li>
<li><p><code>VAULT_AUTH_GITHUB_TOKEN</code>: As for the command line
client, a github token for authentication using the github
authentication backend</p></li>
<li><p><code>VAULTR_AUTH_METHOD</code>: The method to use for
authentication</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Rich FitzJohn</p>
    </div>
    <div class="section level2">
    <h2 id="super-class">Super class<a class="anchor" aria-label="anchor" href="#super-class"></a></h2>
    <p><code><a href="vault_client_object.html">vaultr::vault_client_object</a></code> -&gt; <code>vault_client</code></p>
    </div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>auth</code></dt>
<dd><p>Authentication backends: <a href="vault_client_auth.html">vault_client_auth</a></p></dd>


<dt><code>audit</code></dt>
<dd><p>Audit methods: <a href="vault_client_audit.html">vault_client_audit</a></p></dd>


<dt><code>cubbyhole</code></dt>
<dd><p>The vault cubbyhole key-value store:
<a href="vault_client_cubbyhole.html">vault_client_cubbyhole</a></p></dd>


<dt><code>operator</code></dt>
<dd><p>Operator methods: <a href="vault_client_operator.html">vault_client_operator</a></p></dd>


<dt><code>policy</code></dt>
<dd><p>Policy methods: <a href="vault_client_policy.html">vault_client_policy</a></p></dd>


<dt><code>secrets</code></dt>
<dd><p>Secret backends: <a href="vault_client_secrets.html">vault_client_secrets</a></p></dd>


<dt><code>token</code></dt>
<dd><p>Token methods: <a href="vault_client_token.html">vault_client_token</a></p></dd>


<dt><code>tools</code></dt>
<dd><p>Vault tools: <a href="vault_client_tools.html">vault_client_tools</a></p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-vault_client-new"><code>vault_client_$new()</code></a></p></li>
<li><p><a href="#method-vault_client-api"><code>vault_client_$api()</code></a></p></li>
<li><p><a href="#method-vault_client-read"><code>vault_client_$read()</code></a></p></li>
<li><p><a href="#method-vault_client-write"><code>vault_client_$write()</code></a></p></li>
<li><p><a href="#method-vault_client-delete"><code>vault_client_$delete()</code></a></p></li>
<li><p><a href="#method-vault_client-list"><code>vault_client_$list()</code></a></p></li>
<li><p><a href="#method-vault_client-login"><code>vault_client_$login()</code></a></p></li>
<li><p><a href="#method-vault_client-status"><code>vault_client_$status()</code></a></p></li>
<li><p><a href="#method-vault_client-unwrap"><code>vault_client_$unwrap()</code></a></p></li>
<li><p><a href="#method-vault_client-wrap_lookup"><code>vault_client_$wrap_lookup()</code></a></p></li>
</ul></div><p><details open><summary>Inherited methods</summary><ul><li><span class="pkg-link" data-pkg="vaultr" data-topic="vault_client_object" data-id="format"><a href="vault_client_object.html#method-format"><code>vaultr::vault_client_object$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="vaultr" data-topic="vault_client_object" data-id="help"><a href="vault_client_object.html#method-help"><code>vaultr::vault_client_object$help()</code></a></span></li>
</ul></details></p><hr><a id="method-vault_client-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new vault client. Not typically called
directly, but via the <code>vault_client</code> method.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/vault_client.html">vault_client_</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">addr</span>, <span class="va">tls_config</span>, <span class="va">namespace</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>addr</code></dt>
<dd><p>The vault address, including protocol and port</p></dd>


<dt><code>tls_config</code></dt>
<dd><p>The TLS config, if used</p></dd>


<dt><code>namespace</code></dt>
<dd><p>The namespace, if used</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_client-api"></a><div class="section">
<h3 id="method-api-">Method <code>api()</code><a class="anchor" aria-label="anchor" href="#method-api-"></a></h3>
<p>Returns an api client object that can be used to
directly interact with the vault server.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_client_</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-vault_client-read"></a><div class="section">
<h3 id="method-read-">Method <code>read()</code><a class="anchor" aria-label="anchor" href="#method-read-"></a></h3>
<p>Read a value from the vault.  This can be used to
read any value that you have permission to read, and can also
be used as an interface to a version 1 key-value store (see
<a href="vault_client_kv1.html">vault_client_kv1</a>.  Similar to the vault CLI command
<code>vault read</code>.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_client_</span><span class="op">$</span><span class="fu">read</span><span class="op">(</span><span class="va">path</span>, field <span class="op">=</span> <span class="cn">NULL</span>, metadata <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>path</code></dt>
<dd><p>Path for the secret to read, such as
<code>/secret/mysecret</code></p></dd>


<dt><code>field</code></dt>
<dd><p>Optional field to read from the secret.  Each
secret is stored as a key/value set (represented in R as a
named list) and this is equivalent to using <code>[[field]]</code> on
the return value.  The default, <code>NULL</code>, returns the full set
of values.</p></dd>


<dt><code>metadata</code></dt>
<dd><p>Logical, indicating if we should return
metadata for this secret (lease information etc) as an
attribute along with the values itself.  Ignored if <code>field</code>
is specified.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_client-write"></a><div class="section">
<h3 id="method-write-">Method <code><a href="https://rdrr.io/r/base/write.html" class="external-link">write()</a></code><a class="anchor" aria-label="anchor" href="#method-write-"></a></h3>
<p>Write data into the vault.  This can be used to
write any value that you have permission to write, and can
also be used as an interface to a version 1 key-value store
(see <a href="vault_client_kv1.html">vault_client_kv1</a>.  Similar to the vault CLI
command <code>vault write</code>.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_client_</span><span class="op">$</span><span class="fu">write</span><span class="op">(</span><span class="va">path</span>, <span class="va">data</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>path</code></dt>
<dd><p>Path for the secret to write, such as
<code>/secret/mysecret</code></p></dd>


<dt><code>data</code></dt>
<dd><p>A named list of values to write into the vault at
this path.  This <em>replaces</em> any existing values.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_client-delete"></a><div class="section">
<h3 id="method-delete-">Method <code>delete()</code><a class="anchor" aria-label="anchor" href="#method-delete-"></a></h3>
<p>Delete a value from the vault</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_client_</span><span class="op">$</span><span class="fu">delete</span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>path</code></dt>
<dd><p>The path to delete</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_client-list"></a><div class="section">
<h3 id="method-list-">Method <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code><a class="anchor" aria-label="anchor" href="#method-list-"></a></h3>
<p>List data in the vault at a given path.  This can
be used to list keys, etc (e.g., at <code>/secret</code>).</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_client_</span><span class="op">$</span><span class="fu">list</span><span class="op">(</span><span class="va">path</span>, full_names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>path</code></dt>
<dd><p>The path to list</p></dd>


<dt><code>full_names</code></dt>
<dd><p>Logical, indicating if full paths (relative
to the vault root) should be returned.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>A character vector (of zero length if no keys are
found).  Paths that are "directories" (i.e., that contain
keys and could themselves be listed) will be returned with a
trailing forward slash, e.g. <code>path/</code></p>
</div>

</div><p></p><hr><a id="method-vault_client-login"></a><div class="section">
<h3 id="method-login-">Method <code>login()</code><a class="anchor" aria-label="anchor" href="#method-login-"></a></h3>
<p>Login to the vault.  This method is more
complicated than most.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_client_</span><span class="op">$</span><span class="fu">login</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"token"</span>,</span>
<span>  mount <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  renew <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  token_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  use_cache <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>Additional named parameters passed through to the
underlying method</p></dd>


<dt><code>method</code></dt>
<dd><p>Authentication method to use, as a string.
Supported values include <code>token</code> (the default), <code>github</code>,
<code>approle</code>, <code>ldap</code>, and <code>userpass</code>.</p></dd>


<dt><code>mount</code></dt>
<dd><p>The mount path for the authentication backend, <em>if
it has been mounted in a nonstandard location</em>.  If not
given, then it is assumed that the backend was mounted at a
path corresponding to the method name.</p></dd>


<dt><code>renew</code></dt>
<dd><p>Login, even if we appear to hold a valid token.
If <code>FALSE</code> and we have a token then <code>login</code> does nothing.</p></dd>


<dt><code>quiet</code></dt>
<dd><p>Suppress some informational messages</p></dd>


<dt><code>token_only</code></dt>
<dd><p>Logical, indicating that we do not want to
actually log in, but instead just generate a token and return
that.  IF given then <code>renew</code> is ignored and we always
generate a new token.</p></dd>


<dt><code>use_cache</code></dt>
<dd><p>Logical, indicating if we should look in the
session cache for a token for this client.  If this is <code>TRUE</code>
then when we log in we save a copy of the token for this
session and any subsequent calls to <code>login</code> at this vault
address that use <code>use_cache = TRUE</code> will be able to use this
token.  Using cached tokens will make using some
authentication backends that require authentication with
external resources (e.g., <code>github</code>) much faster.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_client-status"></a><div class="section">
<h3 id="method-status-">Method <code>status()</code><a class="anchor" aria-label="anchor" href="#method-status-"></a></h3>
<p>Return the status of the vault server, including
whether it is sealed or not, and the vault server version.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_client_</span><span class="op">$</span><span class="fu">status</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-vault_client-unwrap"></a><div class="section">
<h3 id="method-unwrap-">Method <code>unwrap()</code><a class="anchor" aria-label="anchor" href="#method-unwrap-"></a></h3>
<p>Returns the original response inside the given
wrapping token. The vault endpoints used by this method
perform validation checks on the token, returns the original
value on the wire rather than a JSON string representation of
it, and ensures that the response is properly audit-logged.</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_client_</span><span class="op">$</span><span class="fu">unwrap</span><span class="op">(</span><span class="va">token</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>token</code></dt>
<dd><p>Specifies the wrapping token ID</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-vault_client-wrap_lookup"></a><div class="section">
<h3 id="method-wrap-lookup-">Method <code>wrap_lookup()</code><a class="anchor" aria-label="anchor" href="#method-wrap-lookup-"></a></h3>
<p>Look up properties of a wrapping token.</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">vault_client_</span><span class="op">$</span><span class="fu">wrap_lookup</span><span class="op">(</span><span class="va">token</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>token</code></dt>
<dd><p>Specifies the wrapping token ID to lookup</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We work with a test vault server here (see ?vault_test_server) for</span></span></span>
<span class="r-in"><span><span class="co"># details.  To use it, you must have a vault binary installed on your</span></span></span>
<span class="r-in"><span><span class="co"># system.  These examples will not affect any real running vault</span></span></span>
<span class="r-in"><span><span class="co"># instance that you can connect to.</span></span></span>
<span class="r-in"><span><span class="va">server</span> <span class="op">&lt;-</span> <span class="fu">vaultr</span><span class="fu">::</span><span class="fu"><a href="vault_test_server.html">vault_test_server</a></span><span class="op">(</span>if_disabled <span class="op">=</span> <span class="va">message</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ...waiting for Vault to start</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ...waiting for Vault to start</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">server</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="co"># Create a vault_client object by providing the address of the vault</span></span></span>
<span class="r-in"><span>  <span class="co"># server.</span></span></span>
<span class="r-in"><span>  <span class="va">client</span> <span class="op">&lt;-</span> <span class="fu">vaultr</span><span class="fu">::</span><span class="fu">vault_client</span><span class="op">(</span>addr <span class="op">=</span> <span class="va">server</span><span class="op">$</span><span class="va">addr</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># The client has many methods, grouped into a structure:</span></span></span>
<span class="r-in"><span>  <span class="va">client</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># For example, token related commands:</span></span></span>
<span class="r-in"><span>  <span class="va">client</span><span class="op">$</span><span class="va">token</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># The client is not authenticated by default:</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="va">client</span><span class="op">$</span><span class="fu">list</span><span class="op">(</span><span class="st">"/secret"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># A few methods are unauthenticated and can still be run</span></span></span>
<span class="r-in"><span>  <span class="va">client</span><span class="op">$</span><span class="fu">status</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Login to the vault, using the token that we know from the server -</span></span></span>
<span class="r-in"><span>  <span class="co"># ordinarily you would use a login approach suitable for your needs</span></span></span>
<span class="r-in"><span>  <span class="co"># (see the vault documentation).</span></span></span>
<span class="r-in"><span>  <span class="va">token</span> <span class="op">&lt;-</span> <span class="va">server</span><span class="op">$</span><span class="va">token</span></span></span>
<span class="r-in"><span>  <span class="va">client</span><span class="op">$</span><span class="fu">login</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"token"</span>, token <span class="op">=</span> <span class="va">token</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># The vault contains no secrets at present</span></span></span>
<span class="r-in"><span>  <span class="va">client</span><span class="op">$</span><span class="fu">list</span><span class="op">(</span><span class="st">"/secret"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Secrets can contain any (reasonable) number of key-value pairs,</span></span></span>
<span class="r-in"><span>  <span class="co"># passed in as a list</span></span></span>
<span class="r-in"><span>  <span class="va">client</span><span class="op">$</span><span class="fu">write</span><span class="op">(</span><span class="st">"/secret/users/alice"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>password <span class="op">=</span> <span class="st">"s3cret!"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># The whole list can be read out</span></span></span>
<span class="r-in"><span>  <span class="va">client</span><span class="op">$</span><span class="fu">read</span><span class="op">(</span><span class="st">"/secret/users/alice"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># ...or just a field</span></span></span>
<span class="r-in"><span>  <span class="va">client</span><span class="op">$</span><span class="fu">read</span><span class="op">(</span><span class="st">"/secret/users/alice"</span>, <span class="st">"password"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Reading non-existant values returns NULL, not an error</span></span></span>
<span class="r-in"><span>  <span class="va">client</span><span class="op">$</span><span class="fu">read</span><span class="op">(</span><span class="st">"/secret/users/bob"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">client</span><span class="op">$</span><span class="fu">delete</span><span class="op">(</span><span class="st">"/secret/users/alice"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error : Have not authenticated against vault</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Verifying token</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Rich FitzJohn, Robert Ashton, Wes Hinsley.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

